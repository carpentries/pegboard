<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="pegboard">
<title>Introduction to the Episode Object • pegboard</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction to the Episode Object">
<meta property="og:description" content="pegboard">
<meta property="og:image" content="https://carpentries.github.io/pegboard/logo.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@zkamvar">
<meta name="twitter:site" content="@thecarpentries">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pegboard</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.7.6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/intro-xml.html">Working with XML data</a>
    <a class="dropdown-item" href="../articles/intro-episode.html">Introduction to the Episode Object</a>
    <a class="dropdown-item" href="../articles/intro-lesson.html">Introduction to the Lesson Object</a>
    <a class="dropdown-item" href="../articles/validation.html">Validation of Lesson Elements</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/carpentries/pegboard/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to the Episode Object</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/carpentries/pegboard/blob/HEAD/vignettes/intro-episode.Rmd" class="external-link"><code>vignettes/intro-episode.Rmd</code></a></small>
      <div class="d-none name"><code>intro-episode.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The {pegboard} package facilitates the analysis and manipulation of
Markdown and R Markdown files by translating them to XML and back again.
This extends the {tinkr} package (see
<code><a href="https://docs.ropensci.org/tinkr/articles/tinkr.html" class="external-link">vignette("tinkr", package = "tinkr")</a></code>) by providing
additional methods that are specific for Carpentries-style lessons.
There are two <code>R6</code> classes defined in {pegboard}:</p>
<ul>
<li>
<code><a href="../reference/Episode.html">pegboard::Episode</a></code> objects that contain the XML data,
YAML metadata and extra fields that define the child and parent files
for a particular episode. These inherit from the
<code><a href="https://docs.ropensci.org/tinkr/reference/yarn.html" class="external-link">tinkr::yarn</a></code> R6 class.</li>
<li>
<code><a href="../reference/Lesson.html">pegboard::Lesson</a></code> objects that contain lists of
<code>Episode</code> objects categorised as “episodes”, “extra”, or
“children”.</li>
</ul>
<p>This vignette will be discussing the structure of Episode objects,
how to query the contents with the {xml2} package, and how to use the
methods and active bindings to get information about, extract, and
manipulate anything inside of a Markdown or R Markdown document.</p>
</div>
<div class="section level2">
<h2 id="reading-markdown-content">Reading Markdown Content<a class="anchor" aria-label="anchor" href="#reading-markdown-content"></a>
</h2>
<p>Each <code>Episode</code> object starts from a Markdown file. In
particular for {pegboard}, we assume that this Markdown file is written
using <a href="https://pandoc.org/MANUAL.html" class="external-link">Pandoc</a> syntax (a
superset of <a href="https://commonmark.org/" class="external-link">CommonMark</a>). It can be
any markdown file, but for us to explore what the <code>Episode</code>
object has to offer us, let’s take an example R Markdown file that is
present in a fragment of a Carpentries Workbench lesson that we have in
this package. We will be using the {xml2} package to explore the object
and the {fs} package to help with constructing file paths.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://carpentries.github.io/pegboard">"pegboard"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://xml2.r-lib.org/" class="external-link">"xml2"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://fs.r-lib.org" class="external-link">"fs"</a></span><span class="op">)</span></span></code></pre></div>
<p>This is what our lesson fragment looks like. It is a fragment because
it’s main purpose is to be used for examples and tests, but it contains
the basic structure of a lesson that we want.</p>
<pre><code><span><span class="co">## <span style="color: #0000BB; font-weight: bold;">/home/runner/work/_temp/Library/pegboard/sandpaper-fragment</span></span></span>
<span><span class="co">## ├── config.yaml</span></span>
<span><span class="co">## ├── <span style="color: #0000BB; font-weight: bold;">episodes</span></span></span>
<span><span class="co">## │   ├── <span style="color: #00BB00;">intro.Rmd</span></span></span>
<span><span class="co">## │   └── nope.md</span></span>
<span><span class="co">## ├── index.md</span></span>
<span><span class="co">## ├── <span style="color: #0000BB; font-weight: bold;">instructors</span></span></span>
<span><span class="co">## │   └── a.md</span></span>
<span><span class="co">## ├── <span style="color: #0000BB; font-weight: bold;">learners</span></span></span>
<span><span class="co">## │   └── setup.md</span></span>
<span><span class="co">## ├── <span style="color: #0000BB; font-weight: bold;">profiles</span></span></span>
<span><span class="co">## │   └── b.md</span></span>
<span><span class="co">## └── <span style="color: #0000BB; font-weight: bold;">site</span></span></span>
<span><span class="co">##     └── README.md</span></span></code></pre>
<p>We can retrieve it with the <code><a href="../reference/lesson_fragment.html">lesson_fragment()</a></code> function,
which loads example data from pegboard. Here we will take that lesson
fragment and read in the first episode with the initialization method,
<code>Episode$new()</code>, followed by
<code>$confirm_sandpaper()</code>, a confirmation that the episode was
created to work with <a href="https://carpentries.github.io/sandpaper/" class="external-link">{sandpaper}</a>, the
user interface and build engine of The Carpentries Workbench (for
information on non-workbench content, see the section on <a href="#jekyll-lesson-markdown-content">Jekyll Lesson Markdown
Content</a>) and <code>$protect_math()</code> which will prevent special
characters in LaTeX math from being escaped.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lsn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lesson_fragment.html">lesson_fragment</a></span><span class="op">(</span><span class="st">"sandpaper-fragment"</span><span class="op">)</span></span>
<span><span class="co"># Read in the intro.Rmd document as an `Episode` object</span></span>
<span><span class="va">intro_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">lsn</span>, <span class="st">"episodes"</span>, <span class="st">"intro.Rmd"</span><span class="op">)</span></span>
<span><span class="va">intro</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Episode.html">Episode</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">intro_path</span><span class="op">)</span><span class="op">$</span><span class="fu">confirm_sandpaper</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">protect_math</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>If we print out the Episode object, I’m going to get a long list of
methods, fields and active bindings (functions that act like fields)
printed:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span></span>
<span><span class="co">## &lt;Episode&gt;</span></span>
<span><span class="co">##   Inherits from: &lt;yarn&gt;</span></span>
<span><span class="co">##   Public:</span></span>
<span><span class="co">##     add_md: function (md, where = 0L) </span></span>
<span><span class="co">##     body: xml_document, xml_node</span></span>
<span><span class="co">##     build_parents: </span></span>
<span><span class="co">##     challenges: active binding</span></span>
<span><span class="co">##     children: </span></span>
<span><span class="co">##     clone: function (deep = FALSE) </span></span>
<span><span class="co">##     code: active binding</span></span>
<span><span class="co">##     confirm_sandpaper: function () </span></span>
<span><span class="co">##     error: active binding</span></span>
<span><span class="co">##     get_blocks: function (type = NULL, level = 1L) </span></span>
<span><span class="co">##     get_challenge_graph: function (recurse = TRUE) </span></span>
<span><span class="co">##     get_divs: function (type = NULL, include = FALSE) </span></span>
<span><span class="co">##     get_images: function (process = FALSE) </span></span>
<span><span class="co">##     get_protected: function (type = NULL) </span></span>
<span><span class="co">##     get_yaml: function () </span></span>
<span><span class="co">##     handout: function (path = NULL, solutions = FALSE) </span></span>
<span><span class="co">##     has_children: active binding</span></span>
<span><span class="co">##     has_parents: active binding</span></span>
<span><span class="co">##     head: function (n = 6L) </span></span>
<span><span class="co">##     headings: active binding</span></span>
<span><span class="co">##     images: active binding</span></span>
<span><span class="co">##     initialize: function (path = NULL, process_tags = TRUE, fix_links = TRUE, </span></span>
<span><span class="co">##     isolate_blocks: function () </span></span>
<span><span class="co">##     keypoints: active binding</span></span>
<span><span class="co">##     label_divs: function () </span></span>
<span><span class="co">##     lesson: active binding</span></span>
<span><span class="co">##     links: active binding</span></span>
<span><span class="co">##     md_vec: function (xpath = NULL, stylesheet_path = stylesheet()) </span></span>
<span><span class="co">##     move_keypoints: function () </span></span>
<span><span class="co">##     move_objectives: function () </span></span>
<span><span class="co">##     move_questions: function () </span></span>
<span><span class="co">##     name: active binding</span></span>
<span><span class="co">##     ns: http://commonmark.org/xml/1.0</span></span>
<span><span class="co">##     objectives: active binding</span></span>
<span><span class="co">##     output: active binding</span></span>
<span><span class="co">##     parents: </span></span>
<span><span class="co">##     path: /home/runner/work/_temp/Library/pegboard/sandpaper-fragm ...</span></span>
<span><span class="co">##     protect_curly: function () </span></span>
<span><span class="co">##     protect_math: function () </span></span>
<span><span class="co">##     protect_unescaped: function () </span></span>
<span><span class="co">##     questions: active binding</span></span>
<span><span class="co">##     remove_error: function () </span></span>
<span><span class="co">##     remove_output: function () </span></span>
<span><span class="co">##     reset: function () </span></span>
<span><span class="co">##     show: function (n = TRUE) </span></span>
<span><span class="co">##     show_problems: active binding</span></span>
<span><span class="co">##     solutions: active binding</span></span>
<span><span class="co">##     summary: function () </span></span>
<span><span class="co">##     tags: active binding</span></span>
<span><span class="co">##     tail: function (n = 6L) </span></span>
<span><span class="co">##     unblock: function (token = "#'", force = FALSE) </span></span>
<span><span class="co">##     use_dovetail: function () </span></span>
<span><span class="co">##     use_sandpaper: function (rmd = FALSE, yml = list()) </span></span>
<span><span class="co">##     validate_divs: function (warn = TRUE) </span></span>
<span><span class="co">##     validate_headings: function (verbose = TRUE, warn = TRUE) </span></span>
<span><span class="co">##     validate_links: function (warn = TRUE) </span></span>
<span><span class="co">##     warning: active binding</span></span>
<span><span class="co">##     write: function (path = NULL, format = "md", edit = FALSE) </span></span>
<span><span class="co">##     yaml: --- title: "Using RMarkdown" teaching: 10 exercises: 2 ---</span></span>
<span><span class="co">##   Private:</span></span>
<span><span class="co">##     clear_yaml_item: function (what) </span></span>
<span><span class="co">##     deep_clone: function (name, value) </span></span>
<span><span class="co">##     encoding: UTF-8</span></span>
<span><span class="co">##     md_lines: function (path = NULL, stylesheet = NULL) </span></span>
<span><span class="co">##     mutations: TRUE FALSE TRUE TRUE FALSE TRUE TRUE TRUE FALSE FALSE</span></span>
<span><span class="co">##     problems: list</span></span>
<span><span class="co">##     record_problem: function (x) </span></span>
<span><span class="co">##     sourcepos: TRUE</span></span></code></pre></div>
<p>The actual XML content is in the <code>$body</code> field. This
contains all the data from the markdown document, but in XML form.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">body</span></span>
<span><span class="co">## {xml_document}</span></span>
<span><span class="co">## &lt;document sourcepos="1:1-91:48" xmlns="http://commonmark.org/xml/1.0"&gt;</span></span>
<span><span class="co">##  [1] &lt;dtag xmlns="http://carpentries.org/pegboard/" label="div-1-questions"/&gt;</span></span>
<span><span class="co">##  [2] &lt;paragraph sourcepos="2:1-2:49"&gt;\n  &lt;text sourcepos="2:1-2:48" xml:space ...</span></span>
<span><span class="co">##  [3] &lt;list sourcepos="4:1-5:0" type="bullet" tight="true"&gt;\n  &lt;item sourcepos ...</span></span>
<span><span class="co">##  [4] &lt;paragraph sourcepos="6:1-6:48"&gt;\n  &lt;text sourcepos="6:1-6:48" xml:space ...</span></span>
<span><span class="co">##  [5] &lt;dtag xmlns="http://carpentries.org/pegboard/" label="div-1-questions"/&gt;</span></span>
<span><span class="co">##  [6] &lt;dtag xmlns="http://carpentries.org/pegboard/" label="div-2-objectives"/&gt;</span></span>
<span><span class="co">##  [7] &lt;paragraph sourcepos="8:1-8:48"&gt;\n  &lt;text sourcepos="8:1-8:48" xml:space ...</span></span>
<span><span class="co">##  [8] &lt;list sourcepos="10:1-12:0" type="bullet" tight="true"&gt;\n  &lt;item sourcep ...</span></span>
<span><span class="co">##  [9] &lt;paragraph sourcepos="13:1-13:48"&gt;\n  &lt;text sourcepos="13:1-13:48" xml:s ...</span></span>
<span><span class="co">## [10] &lt;dtag xmlns="http://carpentries.org/pegboard/" label="div-2-objectives"/&gt;</span></span>
<span><span class="co">## [11] &lt;heading sourcepos="15:1-15:15" level="2"&gt;\n  &lt;text sourcepos="15:4-15:1 ...</span></span>
<span><span class="co">## [12] &lt;paragraph sourcepos="17:1-20:78"&gt;\n  &lt;text sourcepos="17:1-17:79" xml:s ...</span></span>
<span><span class="co">## [13] &lt;paragraph sourcepos="22:1-23:28"&gt;\n  &lt;text sourcepos="22:1-22:79" xml:s ...</span></span>
<span><span class="co">## [14] &lt;list sourcepos="25:2-31:0" type="ordered" start="1" delim="period" tigh ...</span></span>
<span><span class="co">## [15] &lt;dtag xmlns="http://carpentries.org/pegboard/" label="div-3-challenge"/&gt;</span></span>
<span><span class="co">## [16] &lt;paragraph sourcepos="32:1-32:48"&gt;\n  &lt;text sourcepos="32:1-32:47" xml:s ...</span></span>
<span><span class="co">## [17] &lt;heading sourcepos="34:1-34:30" level="2"&gt;\n  &lt;text sourcepos="34:4-34:3 ...</span></span>
<span><span class="co">## [18] &lt;paragraph sourcepos="36:1-36:35"&gt;\n  &lt;text sourcepos="36:1-36:35" xml:s ...</span></span>
<span><span class="co">## [19] &lt;code_block sourcepos="38:1-40:3" xml:space="preserve" language="r" name ...</span></span>
<span><span class="co">## [20] &lt;dtag xmlns="http://carpentries.org/pegboard/" label="div-4-solution"/&gt;</span></span>
<span><span class="co">## ...</span></span></code></pre></div>
<p>If we want to see what the contents look like, you can use the
<code>$show()</code>, <code>$head()</code>, or <code>$tail()</code>
methods (note: the <code>$show()</code> method will print out the entire
markdown document).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## title: "Using RMarkdown"</span></span>
<span><span class="co">## teaching: 10</span></span>
<span><span class="co">## exercises: 2</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::::::::::::::::: questions</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - How do you write a lesson using RMarkdown and `{sandpaper}`?</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="fu">tail</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">## Cool, right?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::: keypoints</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - Use `.Rmd` files for lessons even if you don't need to generate any code</span></span>
<span><span class="co">## - Run `sandpaper::check_lesson()` to identify any issues with your lesson</span></span>
<span><span class="co">## - Run `sandpaper::build_lesson()` to preview your lesson locally</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="fu">show</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ---</span></span>
<span><span class="co">## title: "Using RMarkdown"</span></span>
<span><span class="co">## teaching: 10</span></span>
<span><span class="co">## exercises: 2</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::::::::::::::::: questions</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - How do you write a lesson using RMarkdown and `{sandpaper}`?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::: objectives</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - Explain how to use markdown with the new lesson template</span></span>
<span><span class="co">## - Demonstrate how to include pieces of code, figures, and nested challenge blocks</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Introduction</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## This is the new Carpentries template. It is written in [RMarkdown][r-markdown],</span></span>
<span><span class="co">## which is a variant of Markdown that allows you to render code inside the</span></span>
<span><span class="co">## lesson. Please refer to the [lesson</span></span>
<span><span class="co">## example](https://carpentries.github.io/lesson-example) for full documentation.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## What you need to know is that there are three block quotes required for a valid</span></span>
<span><span class="co">## Carpentries lesson template:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1. `questions` are displayed at the beginning of the episode to prime the</span></span>
<span><span class="co">##   learner for the content.</span></span>
<span><span class="co">## 2. `objectives` are the learning objectives for an episode displayed with</span></span>
<span><span class="co">##   the questions.</span></span>
<span><span class="co">## 3. `keypoints` are displayed at the end of the episode to reinforce the</span></span>
<span><span class="co">##   objectives.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::: challenge</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Challenge 1: Can you do it?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## What is the output of this command?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```{r, eval=FALSE}</span></span>
<span><span class="co">## paste("This", "new", "template", "looks", "good")</span></span>
<span><span class="co">## ```</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::: solution</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Output</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```{r, echo=FALSE}</span></span>
<span><span class="co">## paste("This", "new", "template", "looks", "good")</span></span>
<span><span class="co">## ```</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Challenge 2: how do you nest solutions within challenge blocks?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::: solution</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## You can add a line with at least three colons and a `solution` tag.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Figures</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## You can also include figures:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```{r pyramid}</span></span>
<span><span class="co">## pie(</span></span>
<span><span class="co">##   c(Sky = 78, "Sunny side of pyramid" = 17, "Shady side of pyramid" = 5), </span></span>
<span><span class="co">##   init.angle = 315, </span></span>
<span><span class="co">##   col = c("deepskyblue", "yellow", "yellow3"), </span></span>
<span><span class="co">##   border = FALSE</span></span>
<span><span class="co">## )</span></span>
<span><span class="co">## ```</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Math</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## One of our episodes contains $\LaTeX$ equations when describing how to create</span></span>
<span><span class="co">## dynamic reports with {knitr}, so we now use mathjax to describe this:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## `$\alpha = \dfrac{1}{(1 - \beta)^2}$` becomes: $\alpha = \dfrac{1}{(1 - \beta)^2}$</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Cool, right?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::: keypoints</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - Use `.Rmd` files for lessons even if you don't need to generate any code</span></span>
<span><span class="co">## - Run `sandpaper::check_lesson()` to identify any issues with your lesson</span></span>
<span><span class="co">## - Run `sandpaper::build_lesson()` to preview your lesson locally</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="file-information">File information<a class="anchor" aria-label="anchor" href="#file-information"></a>
</h2>
<p>For information about the file and its relationship to other files,
you can use the following active bindings, which are useful when working
with Episodes in a lesson context.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">path</span></span>
<span><span class="co">## <span style="color: #00BB00;">/home/runner/work/_temp/Library/pegboard/sandpaper-fragment/episodes/intro.Rmd</span></span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">name</span></span>
<span><span class="co">## [1] "intro.Rmd"</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">lesson</span></span>
<span><span class="co">## [1] "/home/runner/work/_temp/Library/pegboard/sandpaper-fragment"</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># NOTE: relationships to other episodes are automatically handled in the</span></span>
<span><span class="co">#       Lesson context</span></span>
<span><span class="va">intro</span><span class="op">$</span><span class="va">has_parents</span></span>
<span><span class="co">## [1] FALSE</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">has_children</span></span>
<span><span class="co">## [1] FALSE</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">children</span> <span class="co"># separate documents processed as if they were part of this document</span></span>
<span><span class="co">## character(0)</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">parents</span>  <span class="co"># the immediate documents that would require this document to build</span></span>
<span><span class="co">## character(0)</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">build_parents</span> <span class="co"># the final documents that would require this document to build</span></span>
<span><span class="co">## character(0)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="accessing-markdown-elements">Accessing Markdown Elements<a class="anchor" aria-label="anchor" href="#accessing-markdown-elements"></a>
</h2>
<p>The <code>Episode</code> object is centered around the
<code>$body</code> item, which contains the XML representation of
document. It is possible to find markdown elements from XPath
statments:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/xml_find_all.html" class="external-link">xml_find_all</a></span><span class="op">(</span><span class="va">intro</span><span class="op">$</span><span class="va">body</span>, <span class="st">".//md:link"</span>, ns <span class="op">=</span> <span class="va">intro</span><span class="op">$</span><span class="va">ns</span><span class="op">)</span></span>
<span><span class="co">## {xml_nodeset (1)}</span></span>
<span><span class="co">## [1] &lt;link sourcepos="20:29-20:54" destination="https://carpentries.github.io/ ...</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/xml_find_all.html" class="external-link">xml_find_first</a></span><span class="op">(</span><span class="va">intro</span><span class="op">$</span><span class="va">body</span>, <span class="st">".//md:list[@type='ordered']"</span>, ns <span class="op">=</span> <span class="va">intro</span><span class="op">$</span><span class="va">ns</span><span class="op">)</span></span>
<span><span class="co">## {xml_node}</span></span>
<span><span class="co">## &lt;list sourcepos="25:2-31:0" type="ordered" start="1" delim="period" tight="true"&gt;</span></span>
<span><span class="co">## [1] &lt;item sourcepos="25:2-26:28"&gt;\n  &lt;paragraph sourcepos="25:5-26:28"&gt;\n     ...</span></span>
<span><span class="co">## [2] &lt;item sourcepos="27:2-28:18"&gt;\n  &lt;paragraph sourcepos="27:5-28:18"&gt;\n     ...</span></span>
<span><span class="co">## [3] &lt;item sourcepos="29:2-31:0"&gt;\n  &lt;paragraph sourcepos="29:5-30:15"&gt;\n    &lt; ...</span></span></code></pre></div>
<p>However, there are some useful elements that we want to know about,
so I have implemented them in active bindings and methods:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># headings where level 2 headings are equivalent to sections</span></span>
<span><span class="va">intro</span><span class="op">$</span><span class="va">headings</span></span>
<span><span class="co">## {xml_nodeset (6)}</span></span>
<span><span class="co">## [1] &lt;heading sourcepos="15:1-15:15" level="2"&gt;\n  &lt;text sourcepos="15:4-15:15 ...</span></span>
<span><span class="co">## [2] &lt;heading sourcepos="34:1-34:30" level="2"&gt;\n  &lt;text sourcepos="34:4-34:30 ...</span></span>
<span><span class="co">## [3] &lt;heading sourcepos="44:1-44:9" level="2"&gt;\n  &lt;text sourcepos="44:4-44:9"  ...</span></span>
<span><span class="co">## [4] &lt;heading sourcepos="53:1-53:66" level="2"&gt;\n  &lt;text sourcepos="53:4-53:66 ...</span></span>
<span><span class="co">## [5] &lt;heading sourcepos="62:1-62:10" level="2"&gt;\n  &lt;text sourcepos="62:4-62:10 ...</span></span>
<span><span class="co">## [6] &lt;heading sourcepos="76:1-76:7" level="2"&gt;\n  &lt;text sourcepos="76:4-76:7"  ...</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># all callouts/fenced divs</span></span>
<span><span class="va">intro</span><span class="op">$</span><span class="fu">get_divs</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## $`div-1-questions`</span></span>
<span><span class="co">## {xml_nodeset (3)}</span></span>
<span><span class="co">## [1] &lt;paragraph sourcepos="2:1-2:49"&gt;\n  &lt;text sourcepos="2:1-2:48" xml:space= ...</span></span>
<span><span class="co">## [2] &lt;list sourcepos="4:1-5:0" type="bullet" tight="true"&gt;\n  &lt;item sourcepos= ...</span></span>
<span><span class="co">## [3] &lt;paragraph sourcepos="6:1-6:48"&gt;\n  &lt;text sourcepos="6:1-6:48" xml:space= ...</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`div-2-objectives`</span></span>
<span><span class="co">## {xml_nodeset (3)}</span></span>
<span><span class="co">## [1] &lt;paragraph sourcepos="8:1-8:48"&gt;\n  &lt;text sourcepos="8:1-8:48" xml:space= ...</span></span>
<span><span class="co">## [2] &lt;list sourcepos="10:1-12:0" type="bullet" tight="true"&gt;\n  &lt;item sourcepo ...</span></span>
<span><span class="co">## [3] &lt;paragraph sourcepos="13:1-13:48"&gt;\n  &lt;text sourcepos="13:1-13:48" xml:sp ...</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`div-3-challenge`</span></span>
<span><span class="co">## {xml_nodeset (12)}</span></span>
<span><span class="co">##  [1] &lt;paragraph sourcepos="32:1-32:48"&gt;\n  &lt;text sourcepos="32:1-32:47" xml:s ...</span></span>
<span><span class="co">##  [2] &lt;heading sourcepos="34:1-34:30" level="2"&gt;\n  &lt;text sourcepos="34:4-34:3 ...</span></span>
<span><span class="co">##  [3] &lt;paragraph sourcepos="36:1-36:35"&gt;\n  &lt;text sourcepos="36:1-36:35" xml:s ...</span></span>
<span><span class="co">##  [4] &lt;code_block sourcepos="38:1-40:3" xml:space="preserve" language="r" name ...</span></span>
<span><span class="co">##  [5] &lt;paragraph sourcepos="42:1-42:34"&gt;\n  &lt;text sourcepos="42:1-42:33" xml:s ...</span></span>
<span><span class="co">##  [6] &lt;heading sourcepos="44:1-44:9" level="2"&gt;\n  &lt;text sourcepos="44:4-44:9" ...</span></span>
<span><span class="co">##  [7] &lt;code_block sourcepos="46:1-48:3" xml:space="preserve" language="r" name ...</span></span>
<span><span class="co">##  [8] &lt;paragraph sourcepos="50:1-50:34"&gt;\n  &lt;text sourcepos="50:1-50:34" xml:s ...</span></span>
<span><span class="co">##  [9] &lt;heading sourcepos="53:1-53:66" level="2"&gt;\n  &lt;text sourcepos="53:4-53:6 ...</span></span>
<span><span class="co">## [10] &lt;paragraph sourcepos="55:1-55:34"&gt;\n  &lt;text sourcepos="55:1-55:33" xml:s ...</span></span>
<span><span class="co">## [11] &lt;paragraph sourcepos="57:1-57:67"&gt;\n  &lt;text sourcepos="57:1-57:52" xml:s ...</span></span>
<span><span class="co">## [12] &lt;paragraph sourcepos="59:1-60:48"&gt;\n  &lt;text sourcepos="59:1-59:33" xml:s ...</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`div-4-solution`</span></span>
<span><span class="co">## {xml_nodeset (4)}</span></span>
<span><span class="co">## [1] &lt;paragraph sourcepos="42:1-42:34"&gt;\n  &lt;text sourcepos="42:1-42:33" xml:sp ...</span></span>
<span><span class="co">## [2] &lt;heading sourcepos="44:1-44:9" level="2"&gt;\n  &lt;text sourcepos="44:4-44:9"  ...</span></span>
<span><span class="co">## [3] &lt;code_block sourcepos="46:1-48:3" xml:space="preserve" language="r" name= ...</span></span>
<span><span class="co">## [4] &lt;paragraph sourcepos="50:1-50:34"&gt;\n  &lt;text sourcepos="50:1-50:34" xml:sp ...</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`div-5-solution`</span></span>
<span><span class="co">## {xml_nodeset (3)}</span></span>
<span><span class="co">## [1] &lt;paragraph sourcepos="55:1-55:34"&gt;\n  &lt;text sourcepos="55:1-55:33" xml:sp ...</span></span>
<span><span class="co">## [2] &lt;paragraph sourcepos="57:1-57:67"&gt;\n  &lt;text sourcepos="57:1-57:52" xml:sp ...</span></span>
<span><span class="co">## [3] &lt;paragraph sourcepos="59:1-60:48"&gt;\n  &lt;text sourcepos="59:1-59:33" xml:sp ...</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`div-6-keypoints`</span></span>
<span><span class="co">## {xml_nodeset (3)}</span></span>
<span><span class="co">## [1] &lt;paragraph sourcepos="85:1-85:48"&gt;\n  &lt;text sourcepos="85:1-85:47" xml:sp ...</span></span>
<span><span class="co">## [2] &lt;list sourcepos="87:1-90:0" type="bullet" tight="true"&gt;\n  &lt;item sourcepo ...</span></span>
<span><span class="co">## [3] &lt;paragraph sourcepos="91:1-91:48"&gt;\n  &lt;text sourcepos="91:1-91:48" xml:sp ...</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">challenges</span></span>
<span><span class="co">## $`div-3-challenge`</span></span>
<span><span class="co">## {xml_nodeset (12)}</span></span>
<span><span class="co">##  [1] &lt;paragraph sourcepos="32:1-32:48"&gt;\n  &lt;text sourcepos="32:1-32:47" xml:s ...</span></span>
<span><span class="co">##  [2] &lt;heading sourcepos="34:1-34:30" level="2"&gt;\n  &lt;text sourcepos="34:4-34:3 ...</span></span>
<span><span class="co">##  [3] &lt;paragraph sourcepos="36:1-36:35"&gt;\n  &lt;text sourcepos="36:1-36:35" xml:s ...</span></span>
<span><span class="co">##  [4] &lt;code_block sourcepos="38:1-40:3" xml:space="preserve" language="r" name ...</span></span>
<span><span class="co">##  [5] &lt;paragraph sourcepos="42:1-42:34"&gt;\n  &lt;text sourcepos="42:1-42:33" xml:s ...</span></span>
<span><span class="co">##  [6] &lt;heading sourcepos="44:1-44:9" level="2"&gt;\n  &lt;text sourcepos="44:4-44:9" ...</span></span>
<span><span class="co">##  [7] &lt;code_block sourcepos="46:1-48:3" xml:space="preserve" language="r" name ...</span></span>
<span><span class="co">##  [8] &lt;paragraph sourcepos="50:1-50:34"&gt;\n  &lt;text sourcepos="50:1-50:34" xml:s ...</span></span>
<span><span class="co">##  [9] &lt;heading sourcepos="53:1-53:66" level="2"&gt;\n  &lt;text sourcepos="53:4-53:6 ...</span></span>
<span><span class="co">## [10] &lt;paragraph sourcepos="55:1-55:34"&gt;\n  &lt;text sourcepos="55:1-55:33" xml:s ...</span></span>
<span><span class="co">## [11] &lt;paragraph sourcepos="57:1-57:67"&gt;\n  &lt;text sourcepos="57:1-57:52" xml:s ...</span></span>
<span><span class="co">## [12] &lt;paragraph sourcepos="59:1-60:48"&gt;\n  &lt;text sourcepos="59:1-59:33" xml:s ...</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">solutions</span></span>
<span><span class="co">## $`div-4-solution`</span></span>
<span><span class="co">## {xml_nodeset (4)}</span></span>
<span><span class="co">## [1] &lt;paragraph sourcepos="42:1-42:34"&gt;\n  &lt;text sourcepos="42:1-42:33" xml:sp ...</span></span>
<span><span class="co">## [2] &lt;heading sourcepos="44:1-44:9" level="2"&gt;\n  &lt;text sourcepos="44:4-44:9"  ...</span></span>
<span><span class="co">## [3] &lt;code_block sourcepos="46:1-48:3" xml:space="preserve" language="r" name= ...</span></span>
<span><span class="co">## [4] &lt;paragraph sourcepos="50:1-50:34"&gt;\n  &lt;text sourcepos="50:1-50:34" xml:sp ...</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`div-5-solution`</span></span>
<span><span class="co">## {xml_nodeset (3)}</span></span>
<span><span class="co">## [1] &lt;paragraph sourcepos="55:1-55:34"&gt;\n  &lt;text sourcepos="55:1-55:33" xml:sp ...</span></span>
<span><span class="co">## [2] &lt;paragraph sourcepos="57:1-57:67"&gt;\n  &lt;text sourcepos="57:1-57:52" xml:sp ...</span></span>
<span><span class="co">## [3] &lt;paragraph sourcepos="59:1-60:48"&gt;\n  &lt;text sourcepos="59:1-59:33" xml:sp ...</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># questions, objectives, and keypoints are standard and return char vectors</span></span>
<span><span class="va">intro</span><span class="op">$</span><span class="va">objectives</span> </span>
<span><span class="co">## [1] "Explain how to use markdown with the new lesson template"                       </span></span>
<span><span class="co">## [2] "Demonstrate how to include pieces of code, figures, and nested challenge blocks"</span></span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">questions</span></span>
<span><span class="co">## [1] "How do you write a lesson using RMarkdown and `{sandpaper}`?"</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">keypoints</span></span>
<span><span class="co">## [1] "Use `.Rmd` files for lessons even if you don't need to generate any code"</span></span>
<span><span class="co">## [2] "Run `sandpaper::check_lesson()` to identify any issues with your lesson" </span></span>
<span><span class="co">## [3] "Run `sandpaper::build_lesson()` to preview your lesson locally"</span></span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># code blocks and output types</span></span>
<span><span class="va">intro</span><span class="op">$</span><span class="va">code</span></span>
<span><span class="co">## {xml_nodeset (3)}</span></span>
<span><span class="co">## [1] &lt;code_block sourcepos="38:1-40:3" xml:space="preserve" language="r" name= ...</span></span>
<span><span class="co">## [2] &lt;code_block sourcepos="46:1-48:3" xml:space="preserve" language="r" name= ...</span></span>
<span><span class="co">## [3] &lt;code_block sourcepos="66:1-73:3" xml:space="preserve" language="r" name= ...</span></span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">output</span></span>
<span><span class="co">## {xml_nodeset (0)}</span></span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">warning</span></span>
<span><span class="co">## {xml_nodeset (0)}</span></span></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">error</span></span>
<span><span class="co">## {xml_nodeset (0)}</span></span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># images and links</span></span>
<span><span class="va">intro</span><span class="op">$</span><span class="va">images</span></span>
<span><span class="co">## {xml_nodeset (0)}</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="fu">get_images</span><span class="op">(</span><span class="op">)</span> <span class="co"># parses images embedded in `&lt;img&gt;` tags</span></span>
<span><span class="co">## {xml_nodeset (0)}</span></span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">links</span></span>
<span><span class="co">## {xml_nodeset (1)}</span></span>
<span><span class="co">## [1] &lt;link sourcepos="20:29-20:54" destination="https://carpentries.github.io/ ...</span></span></code></pre></div>
<p>Much of these are summarized in the <code>$summary()</code>
method:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">##   sections   headings   callouts challenges  solutions       code     output </span></span>
<span><span class="co">##          6          6          6          1          2          3          0 </span></span>
<span><span class="co">##    warning      error     images      links </span></span>
<span><span class="co">##          0          0          0          1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="code-blocks-and-code-chunks">Code blocks and code chunks<a class="anchor" aria-label="anchor" href="#code-blocks-and-code-chunks"></a>
</h2>
<p>In markdown, a <strong>code block</strong> is written with fences of
at least three backtick characters (<code>`</code>) followed by the
language for syntax highlighting:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a>List all files in reverse temporal order, printing their sizes in</span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a>a human-readable format:</span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-larth</span> /path/to/folder</span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<blockquote>
<p>List all files in reverse temporal order, printing their sizes in a
human-readable format:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-larth</span> /path/to/folder</span></code></pre></div>
</blockquote>
<p>When these are processed by {pegboard}, the resulting XML has this
structure where the backticks inform that kind of node
(<code>code_block</code>) and the language type is known as the “info”
attribute. Everything inside the code block is the node text and has
whitespace preserved</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>&lt;<span class="kw">code_block</span><span class="ot"> info=</span><span class="st">"bash"</span><span class="ot"> xml:space=</span><span class="st">"preserve"</span>&gt;</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a>ls -larth /path/to/folder</span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a>&lt;/<span class="kw">code_block</span>&gt;</span></code></pre></div>
<p>In R Markdown, there are special code blocks that are called code
chunks that can be dynamically evaluated. These are distinguished by the
curly braces around the language specifier and <a href="https://yihui.org/knitr/options/" class="external-link">optional attributes</a> that
control the output of the chunk.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a></span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>There is a code chunk here that will produce a plot, but not show the code:</span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a>```{r chunky, echo=FALSE, fig.alt="a plot of y = mx + b for m = 1 and b = 0"}</span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a>plot(1:10, type = "l")</span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a>```</span></code></pre></div>
<blockquote>
<p>There is a code chunk here that will produce a plot, but not show the
code:</p>
<p><img src="intro-episode_files/figure-html/chunk-name-1.png" alt="a plot of y = mx + b for m = 1 and b = 0" width="700"></p>
</blockquote>
<p>When this is processed with {pegboard}, the “info” part of the code
block is further split into “language”, “name” and further attributes
based on the chunk options:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a>&lt;<span class="kw">code_block</span><span class="ot"> xml:space=</span><span class="st">"preserve"</span><span class="ot"> language=</span><span class="st">"r"</span><span class="ot"> name=</span><span class="st">"chunky"</span><span class="ot"> echo=</span><span class="st">"FALSE"</span><span class="ot"> fig.alt=</span><span class="st">"</span><span class="dv">&amp;quot;</span><span class="st">a plot of y = mx + b for m = 1 and b = 0</span><span class="dv">&amp;quot;</span><span class="st">"</span>&gt;</span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a>plot(1:10, type = "l")</span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a>&lt;/<span class="kw">code_block</span>&gt;</span></code></pre></div>
<p>Both code blocks will be encountered, but the difference between them
is that the R Markdown code chunks will have the “language” attribute.
This is an important concept to know about when you are searching and
manipulating R Markdown documents with XPath (see
<code><a href="../articles/intro-xml.html">vignette("intro-xml", package = "pegboard")</a></code>). The next
section will walk through some aspects of manipulation that we can do
with these documents.</p>
</div>
<div class="section level2">
<h2 id="manipulation">Manipulation<a class="anchor" aria-label="anchor" href="#manipulation"></a>
</h2>
<p>Because everything centers around the <code>$body</code> element and
is extracted with {xml2}, it’s possible to manipulate the elements of
the document. One thing that is possible is that we can add new content
to the document using the <code>$add_md()</code> method, which will add
a markdown element after any paragraph in the document.</p>
<p>For example, we can add information about pegboard with a new code
block after the first heading:</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span><span class="fl">26</span><span class="op">)</span> <span class="co"># first 26 lines</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## title: "Using RMarkdown"</span></span>
<span><span class="co">## teaching: 10</span></span>
<span><span class="co">## exercises: 2</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::::::::::::::::: questions</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - How do you write a lesson using RMarkdown and `{sandpaper}`?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::: objectives</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - Explain how to use markdown with the new lesson template</span></span>
<span><span class="co">## - Demonstrate how to include pieces of code, figures, and nested challenge blocks</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Introduction</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## This is the new Carpentries template. It is written in [RMarkdown][r-markdown],</span></span>
<span><span class="co">## which is a variant of Markdown that allows you to render code inside the</span></span>
<span><span class="co">## lesson. Please refer to the [lesson</span></span>
<span><span class="co">## example](https://carpentries.github.io/lesson-example) for full documentation.</span></span></code></pre></div>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">body</span> <span class="co"># first heading is item 11</span></span>
<span><span class="co">## {xml_document}</span></span>
<span><span class="co">## &lt;document sourcepos="1:1-91:48" xmlns="http://commonmark.org/xml/1.0"&gt;</span></span>
<span><span class="co">##  [1] &lt;dtag xmlns="http://carpentries.org/pegboard/" label="div-1-questions"/&gt;</span></span>
<span><span class="co">##  [2] &lt;paragraph sourcepos="2:1-2:49"&gt;\n  &lt;text sourcepos="2:1-2:48" xml:space ...</span></span>
<span><span class="co">##  [3] &lt;list sourcepos="4:1-5:0" type="bullet" tight="true"&gt;\n  &lt;item sourcepos ...</span></span>
<span><span class="co">##  [4] &lt;paragraph sourcepos="6:1-6:48"&gt;\n  &lt;text sourcepos="6:1-6:48" xml:space ...</span></span>
<span><span class="co">##  [5] &lt;dtag xmlns="http://carpentries.org/pegboard/" label="div-1-questions"/&gt;</span></span>
<span><span class="co">##  [6] &lt;dtag xmlns="http://carpentries.org/pegboard/" label="div-2-objectives"/&gt;</span></span>
<span><span class="co">##  [7] &lt;paragraph sourcepos="8:1-8:48"&gt;\n  &lt;text sourcepos="8:1-8:48" xml:space ...</span></span>
<span><span class="co">##  [8] &lt;list sourcepos="10:1-12:0" type="bullet" tight="true"&gt;\n  &lt;item sourcep ...</span></span>
<span><span class="co">##  [9] &lt;paragraph sourcepos="13:1-13:48"&gt;\n  &lt;text sourcepos="13:1-13:48" xml:s ...</span></span>
<span><span class="co">## [10] &lt;dtag xmlns="http://carpentries.org/pegboard/" label="div-2-objectives"/&gt;</span></span>
<span><span class="co">## [11] &lt;heading sourcepos="15:1-15:15" level="2"&gt;\n  &lt;text sourcepos="15:4-15:1 ...</span></span>
<span><span class="co">## [12] &lt;paragraph sourcepos="17:1-20:78"&gt;\n  &lt;text sourcepos="17:1-17:79" xml:s ...</span></span>
<span><span class="co">## [13] &lt;paragraph sourcepos="22:1-23:28"&gt;\n  &lt;text sourcepos="22:1-22:79" xml:s ...</span></span>
<span><span class="co">## [14] &lt;list sourcepos="25:2-31:0" type="ordered" start="1" delim="period" tigh ...</span></span>
<span><span class="co">## [15] &lt;dtag xmlns="http://carpentries.org/pegboard/" label="div-3-challenge"/&gt;</span></span>
<span><span class="co">## [16] &lt;paragraph sourcepos="32:1-32:48"&gt;\n  &lt;text sourcepos="32:1-32:47" xml:s ...</span></span>
<span><span class="co">## [17] &lt;heading sourcepos="34:1-34:30" level="2"&gt;\n  &lt;text sourcepos="34:4-34:3 ...</span></span>
<span><span class="co">## [18] &lt;paragraph sourcepos="36:1-36:35"&gt;\n  &lt;text sourcepos="36:1-36:35" xml:s ...</span></span>
<span><span class="co">## [19] &lt;code_block sourcepos="38:1-40:3" xml:space="preserve" language="r" name ...</span></span>
<span><span class="co">## [20] &lt;dtag xmlns="http://carpentries.org/pegboard/" label="div-4-solution"/&gt;</span></span>
<span><span class="co">## ...</span></span></code></pre></div>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"You can clone the **{pegboard} package**:</span></span>
<span><span class="st"></span></span>
<span><span class="st">```sh</span></span>
<span><span class="st">git clone https://github.com/carpentries/pegboard.git</span></span>
<span><span class="st">```</span></span>
<span><span class="st">"</span><span class="op">)</span></span>
<span><span class="va">intro</span><span class="op">$</span><span class="fu">add_md</span><span class="op">(</span><span class="va">cb</span>, where <span class="op">=</span> <span class="fl">11</span><span class="op">)</span></span>
<span><span class="va">intro</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span><span class="fl">26</span><span class="op">)</span> <span class="co"># code block has been added</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## title: "Using RMarkdown"</span></span>
<span><span class="co">## teaching: 10</span></span>
<span><span class="co">## exercises: 2</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::::::::::::::::: questions</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - How do you write a lesson using RMarkdown and `{sandpaper}`?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::: objectives</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - Explain how to use markdown with the new lesson template</span></span>
<span><span class="co">## - Demonstrate how to include pieces of code, figures, and nested challenge blocks</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Introduction</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## You can clone the **{pegboard} package**:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```sh</span></span>
<span><span class="co">## git clone https://github.com/carpentries/pegboard.git</span></span>
<span><span class="co">## ```</span></span></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="va">code</span></span>
<span><span class="co">## {xml_nodeset (4)}</span></span>
<span><span class="co">## [1] &lt;code_block info="sh" xml:space="preserve" name=""&gt;git clone https://gith ...</span></span>
<span><span class="co">## [2] &lt;code_block sourcepos="38:1-40:3" xml:space="preserve" language="r" name= ...</span></span>
<span><span class="co">## [3] &lt;code_block sourcepos="46:1-48:3" xml:space="preserve" language="r" name= ...</span></span>
<span><span class="co">## [4] &lt;code_block sourcepos="66:1-73:3" xml:space="preserve" language="r" name= ...</span></span></code></pre></div>
<p>You can also manipulate existing elements. For example, let’s say we
wanted to make sure all R code chunks were named. We can do so by
querying and manipulating the code blocks:</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">code</span> <span class="op">&lt;-</span> <span class="va">intro</span><span class="op">$</span><span class="va">code</span></span>
<span><span class="va">code</span></span>
<span><span class="co">## {xml_nodeset (4)}</span></span>
<span><span class="co">## [1] &lt;code_block info="sh" xml:space="preserve" name=""&gt;git clone https://gith ...</span></span>
<span><span class="co">## [2] &lt;code_block sourcepos="38:1-40:3" xml:space="preserve" language="r" name= ...</span></span>
<span><span class="co">## [3] &lt;code_block sourcepos="46:1-48:3" xml:space="preserve" language="r" name= ...</span></span>
<span><span class="co">## [4] &lt;code_block sourcepos="66:1-73:3" xml:space="preserve" language="r" name= ...</span></span></code></pre></div>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># executable code chunks will have the "language" attribute</span></span>
<span><span class="va">is_chunk</span> <span class="op">&lt;-</span> <span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/xml_attr.html" class="external-link">xml_has_attr</a></span><span class="op">(</span><span class="va">code</span>, <span class="st">"language"</span><span class="op">)</span></span>
<span><span class="va">chunks</span> <span class="op">&lt;-</span> <span class="va">code</span><span class="op">[</span><span class="va">is_chunk</span><span class="op">]</span></span>
<span><span class="va">chunk_names</span> <span class="op">&lt;-</span> <span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/xml_attr.html" class="external-link">xml_attr</a></span><span class="op">(</span><span class="va">chunks</span>, <span class="st">"name"</span><span class="op">)</span></span>
<span><span class="va">nonames</span> <span class="op">&lt;-</span> <span class="va">chunk_names</span> <span class="op">==</span> <span class="st">""</span></span>
<span><span class="va">chunk_names</span><span class="op">[</span><span class="va">nonames</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"chunk-"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">nonames</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/xml_attr.html" class="external-link">xml_set_attr</a></span><span class="op">(</span><span class="va">chunks</span>, <span class="st">"name"</span>, <span class="va">chunk_names</span><span class="op">)</span></span>
<span><span class="va">code</span></span>
<span><span class="co">## {xml_nodeset (4)}</span></span>
<span><span class="co">## [1] &lt;code_block info="sh" xml:space="preserve" name=""&gt;git clone https://gith ...</span></span>
<span><span class="co">## [2] &lt;code_block sourcepos="38:1-40:3" xml:space="preserve" language="r" name= ...</span></span>
<span><span class="co">## [3] &lt;code_block sourcepos="46:1-48:3" xml:space="preserve" language="r" name= ...</span></span>
<span><span class="co">## [4] &lt;code_block sourcepos="66:1-73:3" xml:space="preserve" language="r" name= ...</span></span></code></pre></div>
<p>We can see that the chunks now have names, but the proof is in the
rendering:</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="fu">show</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ---</span></span>
<span><span class="co">## title: "Using RMarkdown"</span></span>
<span><span class="co">## teaching: 10</span></span>
<span><span class="co">## exercises: 2</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::::::::::::::::: questions</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - How do you write a lesson using RMarkdown and `{sandpaper}`?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::: objectives</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - Explain how to use markdown with the new lesson template</span></span>
<span><span class="co">## - Demonstrate how to include pieces of code, figures, and nested challenge blocks</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Introduction</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## You can clone the **{pegboard} package**:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```sh</span></span>
<span><span class="co">## git clone https://github.com/carpentries/pegboard.git</span></span>
<span><span class="co">## ```</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## This is the new Carpentries template. It is written in [RMarkdown][r-markdown],</span></span>
<span><span class="co">## which is a variant of Markdown that allows you to render code inside the</span></span>
<span><span class="co">## lesson. Please refer to the [lesson</span></span>
<span><span class="co">## example](https://carpentries.github.io/lesson-example) for full documentation.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## What you need to know is that there are three block quotes required for a valid</span></span>
<span><span class="co">## Carpentries lesson template:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1. `questions` are displayed at the beginning of the episode to prime the</span></span>
<span><span class="co">##   learner for the content.</span></span>
<span><span class="co">## 2. `objectives` are the learning objectives for an episode displayed with</span></span>
<span><span class="co">##   the questions.</span></span>
<span><span class="co">## 3. `keypoints` are displayed at the end of the episode to reinforce the</span></span>
<span><span class="co">##   objectives.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::: challenge</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Challenge 1: Can you do it?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## What is the output of this command?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```{r chunk-1, eval=FALSE}</span></span>
<span><span class="co">## paste("This", "new", "template", "looks", "good")</span></span>
<span><span class="co">## ```</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::: solution</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Output</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```{r chunk-2, echo=FALSE}</span></span>
<span><span class="co">## paste("This", "new", "template", "looks", "good")</span></span>
<span><span class="co">## ```</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Challenge 2: how do you nest solutions within challenge blocks?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::: solution</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## You can add a line with at least three colons and a `solution` tag.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Figures</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## You can also include figures:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```{r pyramid}</span></span>
<span><span class="co">## pie(</span></span>
<span><span class="co">##   c(Sky = 78, "Sunny side of pyramid" = 17, "Shady side of pyramid" = 5), </span></span>
<span><span class="co">##   init.angle = 315, </span></span>
<span><span class="co">##   col = c("deepskyblue", "yellow", "yellow3"), </span></span>
<span><span class="co">##   border = FALSE</span></span>
<span><span class="co">## )</span></span>
<span><span class="co">## ```</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Math</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## One of our episodes contains $\LaTeX$ equations when describing how to create</span></span>
<span><span class="co">## dynamic reports with {knitr}, so we now use mathjax to describe this:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## `$\alpha = \dfrac{1}{(1 - \beta)^2}$` becomes: $\alpha = \dfrac{1}{(1 - \beta)^2}$</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Cool, right?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::: keypoints</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - Use `.Rmd` files for lessons even if you don't need to generate any code</span></span>
<span><span class="co">## - Run `sandpaper::check_lesson()` to identify any issues with your lesson</span></span>
<span><span class="co">## - Run `sandpaper::build_lesson()` to preview your lesson locally</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="handouts">Handouts<a class="anchor" aria-label="anchor" href="#handouts"></a>
</h2>
<p><strong>NOTE: This will change in version 0.8.0</strong>. It is
possible to generate a code handout by using the <code>$handout()</code>
method. This will grab all challenge blocks along with any code block
that contains <code>purl = TRUE</code> and strip out everything else.
You can also specifiy <code>solution = TRUE</code> to include the
solutions:</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">intro</span><span class="op">$</span><span class="fu">handout</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ## Challenge 1: Can you do it?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## What is the output of this command?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```{r chunk-1, eval=FALSE}</span></span>
<span><span class="co">## paste("This", "new", "template", "looks", "good")</span></span>
<span><span class="co">## ```</span></span></code></pre>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">intro</span><span class="op">$</span><span class="fu">handout</span><span class="op">(</span>solution <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ## Challenge 1: Can you do it?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## What is the output of this command?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```{r chunk-1, eval=FALSE}</span></span>
<span><span class="co">## paste("This", "new", "template", "looks", "good")</span></span>
<span><span class="co">## ```</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::: solution</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Output</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```{r chunk-2, echo=FALSE}</span></span>
<span><span class="co">## paste("This", "new", "template", "looks", "good")</span></span>
<span><span class="co">## ```</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Challenge 2: how do you nest solutions within challenge blocks?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::: solution</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## You can add a line with at least three colons and a `solution` tag.</span></span></code></pre>
<p>I want to show that the <code>purl = TRUE</code> method actually
works, so I’ll take the <code>chunks</code> from above and include the
last one:</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/xml_attr.html" class="external-link">xml_set_attr</a></span><span class="op">(</span><span class="va">chunks</span><span class="op">[</span><span class="va">chunk_names</span> <span class="op">==</span> <span class="st">"pyramid"</span><span class="op">]</span>, <span class="st">"purl"</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">intro</span><span class="op">$</span><span class="fu">handout</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ## Challenge 1: Can you do it?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## What is the output of this command?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```{r chunk-1, eval=FALSE}</span></span>
<span><span class="co">## paste("This", "new", "template", "looks", "good")</span></span>
<span><span class="co">## ```</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```{r pyramid, purl=TRUE}</span></span>
<span><span class="co">## pie(</span></span>
<span><span class="co">##   c(Sky = 78, "Sunny side of pyramid" = 17, "Shady side of pyramid" = 5), </span></span>
<span><span class="co">##   init.angle = 315, </span></span>
<span><span class="co">##   col = c("deepskyblue", "yellow", "yellow3"), </span></span>
<span><span class="co">##   border = FALSE</span></span>
<span><span class="co">## )</span></span>
<span><span class="co">## ```</span></span></code></pre>
<p>The <code>path</code> arguments allows this to be written to a file
so that it can be converted to a script using
<code><a href="https://rdrr.io/pkg/knitr/man/knit.html" class="external-link">knitr::purl</a></code></p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">intro</span><span class="op">$</span><span class="fu">handout</span><span class="op">(</span>path <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ## Challenge 1: Can you do it?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## What is the output of this command?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```{r chunk-1, eval=FALSE}</span></span>
<span><span class="co">## paste("This", "new", "template", "looks", "good")</span></span>
<span><span class="co">## ```</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```{r pyramid, purl=TRUE}</span></span>
<span><span class="co">## pie(</span></span>
<span><span class="co">##   c(Sky = 78, "Sunny side of pyramid" = 17, "Shady side of pyramid" = 5), </span></span>
<span><span class="co">##   init.angle = 315, </span></span>
<span><span class="co">##   col = c("deepskyblue", "yellow", "yellow3"), </span></span>
<span><span class="co">##   border = FALSE</span></span>
<span><span class="co">## )</span></span>
<span><span class="co">## ```</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="reset">Reset<a class="anchor" aria-label="anchor" href="#reset"></a>
</h2>
<p>One of the things about manipulating these documents in code is that
it is possible to go back and reset if things are not correct, which is
why we have the <code>$reset()</code> method:</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intro</span><span class="op">$</span><span class="fu">reset</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">confirm_sandpaper</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">protect_math</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span><span class="fl">25</span><span class="op">)</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## title: "Using RMarkdown"</span></span>
<span><span class="co">## teaching: 10</span></span>
<span><span class="co">## exercises: 2</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::::::::::::::::: questions</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - How do you write a lesson using RMarkdown and `{sandpaper}`?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::: objectives</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - Explain how to use markdown with the new lesson template</span></span>
<span><span class="co">## - Demonstrate how to include pieces of code, figures, and nested challenge blocks</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Introduction</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## This is the new Carpentries template. It is written in [RMarkdown][r-markdown],</span></span>
<span><span class="co">## which is a variant of Markdown that allows you to render code inside the</span></span>
<span><span class="co">## lesson. Please refer to the [lesson</span></span>
<span><span class="co">## example](https://carpentries.github.io/lesson-example) for full documentation.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="jekyll-lesson-markdown-content">Jekyll Lesson Markdown Content<a class="anchor" aria-label="anchor" href="#jekyll-lesson-markdown-content"></a>
</h2>
<p>This section describes the features that you would expect to find in
a lesson that was built with the former infrastructure, <a href="https://github.com/carpentries/styles" class="external-link uri">https://github.com/carpentries/styles</a>, which was built
using the Jekyll static site generator. These style lessons are no
longer supported by The Carpentries. {pegboard} does support these
lessons so that they can be transitioned to use The Workbench syntax via
<a href="https://github.com/carpentries/lesson-transition#readme" class="external-link">The
Carpentries Lesson Transition Tool</a>. This was the <em>first</em>
syntax that was supported by {pegboard} because the package was written
initially as a way to explore the structure of our lessons.</p>
<div class="section level3">
<h3 id="the-syntax-of-jekyll-lessons">The Syntax of Jekyll Lessons<a class="anchor" aria-label="anchor" href="#the-syntax-of-jekyll-lessons"></a>
</h3>
<p>The former Jekyll syntax used <a href="https://kramdown.gettalong.org/syntax.html" class="external-link">kramdown-flavoured
markdown</a>, which evolved separately from <a href="https://spec.commonmark.org/" class="external-link">commonmark</a>, the syntax that
{pegboard} knows and that Pandoc-flavoured markdown extends. One of the
key differences with the kramdown syntax is that it used something known
as <a href="https://kramdown.gettalong.org/syntax.html#inline-attribute-lists" class="external-link">Inline
Attribute Lists (IAL)</a> to help define classes for markdown elements.
These elements were formated as <code>{: &lt;attributes&gt;}</code>
where <code>&lt;attributes&gt;</code> is replaced by class definitions
and key/value pairs. They always appear <em>after</em> the relevant
block which lead to code blocks that looked like this:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="in">~~~</span></span>
<span id="cb57-2"><a href="#cb57-2" tabindex="-1"></a><span class="in">ls -larth /path/to/dir</span></span>
<span id="cb57-3"><a href="#cb57-3" tabindex="-1"></a><span class="in">~~~</span></span>
<span id="cb57-4"><a href="#cb57-4" tabindex="-1"></a>{: .language-bash}</span></code></pre></div>
<p>Moreover, to achieve the special callout blocks, we used blockquotes
that were given special classes (which is an accessbility no-no because
those blocks were not semantic HTML) and the nesting of these block
quotes looked like this:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="at">&gt; ## Challenge</span></span>
<span id="cb58-2"><a href="#cb58-2" tabindex="-1"></a><span class="at">&gt; </span></span>
<span id="cb58-3"><a href="#cb58-3" tabindex="-1"></a><span class="at">&gt; How do you list all files in a directory in reverse order by the time it was </span></span>
<span id="cb58-4"><a href="#cb58-4" tabindex="-1"></a><span class="at">&gt; last updated?</span></span>
<span id="cb58-5"><a href="#cb58-5" tabindex="-1"></a><span class="at">&gt; </span></span>
<span id="cb58-6"><a href="#cb58-6" tabindex="-1"></a><span class="at">&gt; &gt; ## Solution</span></span>
<span id="cb58-7"><a href="#cb58-7" tabindex="-1"></a><span class="at">&gt; &gt; </span></span>
<span id="cb58-8"><a href="#cb58-8" tabindex="-1"></a><span class="at">&gt; &gt; ~~~</span></span>
<span id="cb58-9"><a href="#cb58-9" tabindex="-1"></a><span class="at">&gt; &gt; ls -larth /path/to/dir</span></span>
<span id="cb58-10"><a href="#cb58-10" tabindex="-1"></a><span class="at">&gt; &gt; ~~~</span></span>
<span id="cb58-11"><a href="#cb58-11" tabindex="-1"></a><span class="at">&gt; &gt; {: .language-bash}</span></span>
<span id="cb58-12"><a href="#cb58-12" tabindex="-1"></a><span class="at">&gt; {: .solution}</span></span>
<span id="cb58-13"><a href="#cb58-13" tabindex="-1"></a><span class="at">{: .challenge}</span></span></code></pre></div>
<p>One of the biggest challenges with this for authors was that, unless
you used an editor like vim or emacs, this was difficult to write with
all the prefixed blockquote characters and keeping track of which IALs
belonged to which block.</p>
</div>
<div class="section level3">
<h3 id="special-methods-and-active-bindings">Special methods and active bindings<a class="anchor" aria-label="anchor" href="#special-methods-and-active-bindings"></a>
</h3>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://carpentries.github.io/pegboard">"pegboard"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://xml2.r-lib.org/" class="external-link">"xml2"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://fs.r-lib.org" class="external-link">"fs"</a></span><span class="op">)</span></span></code></pre></div>
<p>Episodes written in the Jekyll syntax have special functions and
active bindings that allow them to be analyzed and transformed to
Workbench episodes. Here is an example from a lesson fragment:</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lesson_fragment.html">lesson_fragment</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">ep</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Episode.html">Episode</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">lf</span>, <span class="st">"_episodes"</span>, <span class="st">"14-looping-data-sets.md"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># show relevant sections of head and tail</span></span>
<span><span class="va">ep</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span><span class="fl">29</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ---</span></span>
<span><span class="co">## title: "Looping Over Data Sets"</span></span>
<span><span class="co">## teaching: 5</span></span>
<span><span class="co">## exercises: 10</span></span>
<span><span class="co">## questions:</span></span>
<span><span class="co">## - "How can I process many data sets with a single command?"</span></span>
<span><span class="co">## objectives:</span></span>
<span><span class="co">## - "Be able to read and write globbing expressions that match sets of files."</span></span>
<span><span class="co">## - "Use glob to create lists of files."</span></span>
<span><span class="co">## - "Write for loops to perform operations on files given their names in a list."</span></span>
<span><span class="co">## keypoints:</span></span>
<span><span class="co">## - "Use a `for` loop to process files given a list of their names."</span></span>
<span><span class="co">## - "Use `glob.glob` to find sets of files whose names match a pattern."</span></span>
<span><span class="co">## - "Use `glob` and `for` to process batches of files."</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Use a `for` loop to process files given a list of their names.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - A filename is a character string.</span></span>
<span><span class="co">## - And lists can contain character strings.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```</span></span>
<span><span class="co">## import pandas as pd</span></span>
<span><span class="co">## for filename in ['data/gapminder_gdp_africa.csv', 'data/gapminder_gdp_asia.csv']:</span></span>
<span><span class="co">##     data = pd.read_csv(filename, index_col='country')</span></span>
<span><span class="co">##     print(filename, data.min())</span></span>
<span><span class="co">## ```</span></span>
<span><span class="co">## {: .language-python}</span></span></code></pre>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="fu">tail</span><span class="op">(</span><span class="fl">53</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## &gt; ## Comparing Data</span></span>
<span><span class="co">## &gt; </span></span>
<span><span class="co">## &gt; Write a program that reads in the regional data sets</span></span>
<span><span class="co">## &gt; and plots the average GDP per capita for each region over time</span></span>
<span><span class="co">## &gt; in a single chart.</span></span>
<span><span class="co">## &gt; </span></span>
<span><span class="co">## &gt; &gt; ## Solution</span></span>
<span><span class="co">## &gt; &gt; </span></span>
<span><span class="co">## &gt; &gt; This solution builds a useful legend by using the string [`split`](https://docs.python.org/3/library/stdtypes.html#str.split) method to</span></span>
<span><span class="co">## &gt; &gt; extract the `region` from the path 'data/gapminder\_gdp\_a\_specific\_region.csv'. The [`pathlib module`]</span></span>
<span><span class="co">## &gt; &gt; also provides useful abstractions for file and path manipulation like returning the name of a file</span></span>
<span><span class="co">## &gt; &gt; without the file extension.</span></span>
<span><span class="co">## &gt; &gt; </span></span>
<span><span class="co">## &gt; &gt; ```</span></span>
<span><span class="co">## &gt; &gt; import glob</span></span>
<span><span class="co">## &gt; &gt; import pandas as pd</span></span>
<span><span class="co">## &gt; &gt; import matplotlib.pyplot as plt</span></span>
<span><span class="co">## &gt; &gt; fig, ax = plt.subplots(1,1)</span></span>
<span><span class="co">## &gt; &gt; for filename in glob.glob('data/gapminder_gdp*.csv'):</span></span>
<span><span class="co">## &gt; &gt;     dataframe = pd.read_csv(filename)</span></span>
<span><span class="co">## &gt; &gt;     # extract &lt;region&gt; from the filename, expected to be in the format 'data/gapminder_gdp_&lt;region&gt;.csv'.</span></span>
<span><span class="co">## &gt; &gt;     # we will split the string using the split method and `_` as our separator,</span></span>
<span><span class="co">## &gt; &gt;     # retrieve the last string in the list that split returns (`&lt;region&gt;.csv`), </span></span>
<span><span class="co">## &gt; &gt;     # and then remove the `.csv` extension from that string.</span></span>
<span><span class="co">## &gt; &gt;     region = filename.split('_')[-1][:-4] </span></span>
<span><span class="co">## &gt; &gt;     dataframe.mean().plot(ax=ax, label=region)</span></span>
<span><span class="co">## &gt; &gt; plt.legend()</span></span>
<span><span class="co">## &gt; &gt; plt.show()</span></span>
<span><span class="co">## &gt; &gt; ```</span></span>
<span><span class="co">## &gt; &gt; {: .language-python}</span></span>
<span><span class="co">## &gt; {: .solution}</span></span>
<span><span class="co">## {: .challenge}</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ### ZNK test links and images</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## &lt;img src="https://carpentries.org/assets/img/TheCarpentries.svg" alt="books as clubs"&gt;</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## &lt;img src="../no-workie.svg" alt="books as clubs"&gt;</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Link to [Home]({{ page.root }}/index.html) and to [shell]({{ site.swc_pages }}/shell-novice)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ![Carpentries logo](https://carpentries.org/assets/img/TheCarpentries.svg)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ![Non-working image](../no-workie.svg)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ![Non-working image with jekyll syntax]({{ page.root }}/no-workie.svg)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## This text includes a [link that isn't parsed correctly by commonmark]({{ page.root }}{% link index.md %})</span></span>
<span><span class="co">## . The rest of the text should be properly parsed.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## {% include links.md %}</span></span></code></pre>
<p>Notice that the questions, objectives, and keypoints are in the yaml
frontmatter. This is why we have an accessor that returns the list
instead of the node, for compatibility with the Jekyll lessons:</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="va">questions</span></span>
<span><span class="co">## [1] "How can I process many data sets with a single command?"</span></span></code></pre></div>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="va">objectives</span></span>
<span><span class="co">## [1] "Be able to read and write globbing expressions that match sets of files."   </span></span>
<span><span class="co">## [2] "Use glob to create lists of files."                                         </span></span>
<span><span class="co">## [3] "Write for loops to perform operations on files given their names in a list."</span></span></code></pre></div>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="va">keypoints</span></span>
<span><span class="co">## [1] "Use a `for` loop to process files given a list of their names."    </span></span>
<span><span class="co">## [2] "Use `glob.glob` to find sets of files whose names match a pattern."</span></span>
<span><span class="co">## [3] "Use `glob` and `for` to process batches of files."</span></span></code></pre></div>
<p>Even though the challenges are formatted differently, the accessors
will still return them correctly:</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="va">challenges</span></span>
<span><span class="co">## {xml_nodeset (3)}</span></span>
<span><span class="co">## [1] &lt;block_quote sourcepos="95:1-108:14" ktag="{: .challenge}"&gt;\n  &lt;heading s ...</span></span>
<span><span class="co">## [2] &lt;block_quote sourcepos="110:1-140:14" ktag="{: .challenge}"&gt;\n  &lt;heading  ...</span></span>
<span><span class="co">## [3] &lt;block_quote sourcepos="142:1-170:14" ktag="{: .challenge}"&gt;\n  &lt;heading  ...</span></span></code></pre></div>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="va">solutions</span></span>
<span><span class="co">## {xml_nodeset (3)}</span></span>
<span><span class="co">## [1] &lt;block_quote sourcepos="104:3-108:14" ktag="{: .solution}"&gt;\n  &lt;heading s ...</span></span>
<span><span class="co">## [2] &lt;block_quote sourcepos="128:3-140:14" ktag="{: .solution}"&gt;\n  &lt;heading s ...</span></span>
<span><span class="co">## [3] &lt;block_quote sourcepos="147:3-170:14" ktag="{: .solution}"&gt;\n  &lt;heading s ...</span></span></code></pre></div>
<p>You can also get <em>all</em> of the block quotes using the
<code>$get_blocks()</code> method. NOTE: this will extract <em>all</em>
block quotes (including those that do not have the <code>ktag</code>
attributes.</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="fu">get_blocks</span><span class="op">(</span><span class="op">)</span> <span class="co"># default is all top-level blocks (challenges/callouts)</span></span>
<span><span class="co">## {xml_nodeset (3)}</span></span>
<span><span class="co">## [1] &lt;block_quote sourcepos="95:1-108:14" ktag="{: .challenge}"&gt;\n  &lt;heading s ...</span></span>
<span><span class="co">## [2] &lt;block_quote sourcepos="110:1-140:14" ktag="{: .challenge}"&gt;\n  &lt;heading  ...</span></span>
<span><span class="co">## [3] &lt;block_quote sourcepos="142:1-170:14" ktag="{: .challenge}"&gt;\n  &lt;heading  ...</span></span></code></pre></div>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="fu">get_blocks</span><span class="op">(</span>level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="co"># nested blocks are usually solutions</span></span>
<span><span class="co">## {xml_nodeset (3)}</span></span>
<span><span class="co">## [1] &lt;block_quote sourcepos="104:3-108:14" ktag="{: .solution}"&gt;\n  &lt;heading s ...</span></span>
<span><span class="co">## [2] &lt;block_quote sourcepos="128:3-140:14" ktag="{: .solution}"&gt;\n  &lt;heading s ...</span></span>
<span><span class="co">## [3] &lt;block_quote sourcepos="147:3-170:14" ktag="{: .solution}"&gt;\n  &lt;heading s ...</span></span></code></pre></div>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="fu">get_blocks</span><span class="op">(</span>level <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="co"># level zero is all levels</span></span>
<span><span class="co">## {xml_nodeset (6)}</span></span>
<span><span class="co">## [1] &lt;block_quote sourcepos="95:1-108:14" ktag="{: .challenge}"&gt;\n  &lt;heading s ...</span></span>
<span><span class="co">## [2] &lt;block_quote sourcepos="104:3-108:14" ktag="{: .solution}"&gt;\n  &lt;heading s ...</span></span>
<span><span class="co">## [3] &lt;block_quote sourcepos="110:1-140:14" ktag="{: .challenge}"&gt;\n  &lt;heading  ...</span></span>
<span><span class="co">## [4] &lt;block_quote sourcepos="128:3-140:14" ktag="{: .solution}"&gt;\n  &lt;heading s ...</span></span>
<span><span class="co">## [5] &lt;block_quote sourcepos="142:1-170:14" ktag="{: .challenge}"&gt;\n  &lt;heading  ...</span></span>
<span><span class="co">## [6] &lt;block_quote sourcepos="147:3-170:14" ktag="{: .solution}"&gt;\n  &lt;heading s ...</span></span></code></pre></div>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="fu">get_blocks</span><span class="op">(</span>type <span class="op">=</span> <span class="st">".solution"</span>, level <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="co"># filter by type</span></span>
<span><span class="co">## {xml_nodeset (3)}</span></span>
<span><span class="co">## [1] &lt;block_quote sourcepos="104:3-108:14" ktag="{: .solution}"&gt;\n  &lt;heading s ...</span></span>
<span><span class="co">## [2] &lt;block_quote sourcepos="128:3-140:14" ktag="{: .solution}"&gt;\n  &lt;heading s ...</span></span>
<span><span class="co">## [3] &lt;block_quote sourcepos="147:3-170:14" ktag="{: .solution}"&gt;\n  &lt;heading s ...</span></span></code></pre></div>
<p>One of the things that was advantageous about blockquotes is that we
could analyze the pathway through the blockquotes and figure out how
they were comonly written in a lesson. The
<code>$get_challenge_graph()</code> creates a data frame that describes
these relationships:</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="fu">get_challenge_graph</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">##    Block       from         to          pos level</span></span>
<span><span class="co">## 1      1  challenge    heading  95:1-108:14     1</span></span>
<span><span class="co">## 2      1    heading  paragraph   95:3-95:24     1</span></span>
<span><span class="co">## 3      1  paragraph       list   97:3-97:87     1</span></span>
<span><span class="co">## 4      1       list   solution   99:3-103:1     1</span></span>
<span><span class="co">## 5      1   solution     lesson 104:3-108:14     1</span></span>
<span><span class="co">## 6      1   solution    heading 104:3-108:14     2</span></span>
<span><span class="co">## 7      1    heading  paragraph 104:5-104:15     2</span></span>
<span><span class="co">## 8      1  paragraph  challenge 106:5-108:14     2</span></span>
<span><span class="co">## 9      2  challenge    heading 110:1-140:14     1</span></span>
<span><span class="co">## 10     2    heading  paragraph 110:3-110:22     1</span></span>
<span><span class="co">## 11     2  paragraph code_block 112:3-113:39     1</span></span>
<span><span class="co">## 12     2 code_block  paragraph  115:3-123:5     1</span></span>
<span><span class="co">## 13     2  paragraph   solution 124:3-126:72     1</span></span>
<span><span class="co">## 14     2   solution     lesson 128:3-140:14     1</span></span>
<span><span class="co">## 15     2   solution    heading 128:3-140:14     2</span></span>
<span><span class="co">## 16     2    heading code_block 128:5-128:15     2</span></span>
<span><span class="co">## 17     2 code_block  challenge  129:5-137:7     2</span></span>
<span><span class="co">## 18     3  challenge    heading 142:1-170:14     1</span></span>
<span><span class="co">## 19     3    heading  paragraph 142:3-142:19     1</span></span>
<span><span class="co">## 20     3  paragraph   solution 144:3-146:20     1</span></span>
<span><span class="co">## 21     3   solution     lesson 147:3-170:14     1</span></span>
<span><span class="co">## 22     3   solution    heading 147:3-170:14     2</span></span>
<span><span class="co">## 23     3    heading  paragraph 147:5-147:15     2</span></span>
<span><span class="co">## 24     3  paragraph code_block 148:5-151:31     2</span></span>
<span><span class="co">## 25     3 code_block  challenge  152:5-167:7     2</span></span></code></pre></div>
<p>You might notice that there is an attribute called <code>ktag</code>.
When a Jekyll-formatted episode is read in, all of the IAL tags are
processed and placed in an attribute called <code>ktag</code>
(<strong>k</strong>ramdown <strong>tag</strong>), which is accessible
via the <code>$tags</code> active binding. This is needed because
commonmark does not know how to process postfix tags and it is important
for the translation to commonmark syntax:</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="va">tags</span></span>
<span><span class="co">## {xml_nodeset (17)}</span></span>
<span><span class="co">##  [1]  ktag="{: .language-python}"</span></span>
<span><span class="co">##  [2]  ktag="{: .output}"</span></span>
<span><span class="co">##  [3]  ktag="{: .language-python}"</span></span>
<span><span class="co">##  [4]  ktag="{: .output}"</span></span>
<span><span class="co">##  [5]  ktag="{: .language-python}"</span></span>
<span><span class="co">##  [6]  ktag="{: .output}"</span></span>
<span><span class="co">##  [7]  ktag="{: .language-python}"</span></span>
<span><span class="co">##  [8]  ktag="{: .output}"</span></span>
<span><span class="co">##  [9]  ktag="{: .challenge}"</span></span>
<span><span class="co">## [10]  ktag="{: .solution}"</span></span>
<span><span class="co">## [11]  ktag="{: .challenge}"</span></span>
<span><span class="co">## [12]  ktag="{: .language-python}"</span></span>
<span><span class="co">## [13]  ktag="{: .solution}"</span></span>
<span><span class="co">## [14]  ktag="{: .language-python}"</span></span>
<span><span class="co">## [15]  ktag="{: .challenge}"</span></span>
<span><span class="co">## [16]  ktag="{: .solution}"</span></span>
<span><span class="co">## [17]  ktag="{: .language-python}"</span></span></code></pre></div>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/xml_children.html" class="external-link">xml_parent</a></span><span class="op">(</span><span class="va">ep</span><span class="op">$</span><span class="va">tags</span><span class="op">)</span></span>
<span><span class="co">## {xml_nodeset (17)}</span></span>
<span><span class="co">##  [1] &lt;code_block sourcepos="7:1-12:3" xml:space="preserve" name="" ktag="{: . ...</span></span>
<span><span class="co">##  [2] &lt;code_block sourcepos="14:1-33:3" xml:space="preserve" name="" ktag="{:  ...</span></span>
<span><span class="co">##  [3] &lt;code_block sourcepos="48:1-51:3" xml:space="preserve" name="" ktag="{:  ...</span></span>
<span><span class="co">##  [4] &lt;code_block sourcepos="53:1-57:3" xml:space="preserve" name="" ktag="{:  ...</span></span>
<span><span class="co">##  [5] &lt;code_block sourcepos="60:1-62:3" xml:space="preserve" name="" ktag="{:  ...</span></span>
<span><span class="co">##  [6] &lt;code_block sourcepos="64:1-66:3" xml:space="preserve" name="" ktag="{:  ...</span></span>
<span><span class="co">##  [7] &lt;code_block sourcepos="74:1-78:3" xml:space="preserve" name="" ktag="{:  ...</span></span>
<span><span class="co">##  [8] &lt;code_block sourcepos="80:1-87:3" xml:space="preserve" name="" ktag="{:  ...</span></span>
<span><span class="co">##  [9] &lt;block_quote sourcepos="95:1-108:14" ktag="{: .challenge}"&gt;\n  &lt;heading  ...</span></span>
<span><span class="co">## [10] &lt;block_quote sourcepos="104:3-108:14" ktag="{: .solution}"&gt;\n  &lt;heading  ...</span></span>
<span><span class="co">## [11] &lt;block_quote sourcepos="110:1-140:14" ktag="{: .challenge}"&gt;\n  &lt;heading ...</span></span>
<span><span class="co">## [12] &lt;code_block sourcepos="115:3-123:5" xml:space="preserve" name="" ktag="{ ...</span></span>
<span><span class="co">## [13] &lt;block_quote sourcepos="128:3-140:14" ktag="{: .solution}"&gt;\n  &lt;heading  ...</span></span>
<span><span class="co">## [14] &lt;code_block sourcepos="129:5-137:7" xml:space="preserve" name="" ktag="{ ...</span></span>
<span><span class="co">## [15] &lt;block_quote sourcepos="142:1-170:14" ktag="{: .challenge}"&gt;\n  &lt;heading ...</span></span>
<span><span class="co">## [16] &lt;block_quote sourcepos="147:3-170:14" ktag="{: .solution}"&gt;\n  &lt;heading  ...</span></span>
<span><span class="co">## [17] &lt;code_block sourcepos="152:5-167:7" xml:space="preserve" name="" ktag="{ ...</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="transformation">Transformation<a class="anchor" aria-label="anchor" href="#transformation"></a>
</h3>
<p>It was always known that we would want to use a different syntax to
write the lessons as much of the community struggled with the kramdown
syntax and it was difficult to parse and validate. The automated
transformation workflow is what powers the Lesson Transformation Tool
and we have composed it into a few basic steps:</p>
<ol style="list-style-type: decimal">
<li>transform block quotes to fenced divs (via the
<code>$unblock()</code> method, using the internal
<code><a href="../reference/replace_with_div.html">replace_with_div()</a></code> function).</li>
<li>removing the jekyll syntax, liquid templating, and fix relative
links (via the <code>$use_sandpaper()</code> method, using the internal
<code><a href="../reference/use_sandpaper.html">use_sandpaper()</a></code> function.</li>
<li>moving the yaml frontmatter using the <code>$move_</code>
methods</li>
</ol>
<p>The process looks like this composable chain of methods:</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="fu">reset</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">ep</span><span class="op">$</span></span>
<span>  <span class="fu">unblock</span><span class="op">(</span><span class="op">)</span><span class="op">$</span></span>
<span>  <span class="fu">use_sandpaper</span><span class="op">(</span><span class="op">)</span><span class="op">$</span></span>
<span>  <span class="fu">move_questions</span><span class="op">(</span><span class="op">)</span><span class="op">$</span></span>
<span>  <span class="fu">move_objectives</span><span class="op">(</span><span class="op">)</span><span class="op">$</span></span>
<span>  <span class="fu">move_keypoints</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">ep</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span><span class="fl">31</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ---</span></span>
<span><span class="co">## title: Looping Over Data Sets</span></span>
<span><span class="co">## teaching: 5</span></span>
<span><span class="co">## exercises: 10</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::: objectives</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - Be able to read and write globbing expressions that match sets of files.</span></span>
<span><span class="co">## - Use glob to create lists of files.</span></span>
<span><span class="co">## - Write for loops to perform operations on files given their names in a list.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::::::::::::::::::: questions</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - How can I process many data sets with a single command?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Use a `for` loop to process files given a list of their names.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - A filename is a character string.</span></span>
<span><span class="co">## - And lists can contain character strings.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```python</span></span>
<span><span class="co">## import pandas as pd</span></span>
<span><span class="co">## for filename in ['data/gapminder_gdp_africa.csv', 'data/gapminder_gdp_asia.csv']:</span></span>
<span><span class="co">##     data = pd.read_csv(filename, index_col='country')</span></span>
<span><span class="co">##     print(filename, data.min())</span></span>
<span><span class="co">## ```</span></span></code></pre>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="fu">tail</span><span class="op">(</span><span class="fl">65</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## :::::::::::::::::::::::::::::::::::::::  challenge</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Comparing Data</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Write a program that reads in the regional data sets</span></span>
<span><span class="co">## and plots the average GDP per capita for each region over time</span></span>
<span><span class="co">## in a single chart.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::  solution</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Solution</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## This solution builds a useful legend by using the string [`split`](https://docs.python.org/3/library/stdtypes.html#str.split) method to</span></span>
<span><span class="co">## extract the `region` from the path 'data/gapminder\_gdp\_a\_specific\_region.csv'. The [`pathlib module`]</span></span>
<span><span class="co">## also provides useful abstractions for file and path manipulation like returning the name of a file</span></span>
<span><span class="co">## without the file extension.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```python</span></span>
<span><span class="co">## import glob</span></span>
<span><span class="co">## import pandas as pd</span></span>
<span><span class="co">## import matplotlib.pyplot as plt</span></span>
<span><span class="co">## fig, ax = plt.subplots(1,1)</span></span>
<span><span class="co">## for filename in glob.glob('data/gapminder_gdp*.csv'):</span></span>
<span><span class="co">##     dataframe = pd.read_csv(filename)</span></span>
<span><span class="co">##     # extract &lt;region&gt; from the filename, expected to be in the format 'data/gapminder_gdp_&lt;region&gt;.csv'.</span></span>
<span><span class="co">##     # we will split the string using the split method and `_` as our separator,</span></span>
<span><span class="co">##     # retrieve the last string in the list that split returns (`&lt;region&gt;.csv`), </span></span>
<span><span class="co">##     # and then remove the `.csv` extension from that string.</span></span>
<span><span class="co">##     region = filename.split('_')[-1][:-4] </span></span>
<span><span class="co">##     dataframe.mean().plot(ax=ax, label=region)</span></span>
<span><span class="co">## plt.legend()</span></span>
<span><span class="co">## plt.show()</span></span>
<span><span class="co">## ```</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ### ZNK test links and images</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## &lt;img src="https://carpentries.org/assets/img/TheCarpentries.svg" alt="books as clubs"&gt;</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## &lt;img src="no-workie.svg" alt="books as clubs"&gt;</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Link to [Home](index.html) and to [shell](https://swcarpentry.github.io/shell-novice)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ![](https://carpentries.org/assets/img/TheCarpentries.svg){alt='Carpentries logo'}</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ![](no-workie.svg){alt='Non-working image'}</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ![](no-workie.svg){alt='Non-working image with jekyll syntax'}</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## This text includes a [link that isn't parsed correctly by commonmark](index.md)</span></span>
<span><span class="co">## . The rest of the text should be properly parsed.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::::::::::::::::::: keypoints</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - Use a `for` loop to process files given a list of their names.</span></span>
<span><span class="co">## - Use `glob.glob` to find sets of files whose names match a pattern.</span></span>
<span><span class="co">## - Use `glob` and `for` to process batches of files.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::::</span></span></code></pre>
<div class="section level4">
<h4 id="transformation-tip">Transformation tip!<a class="anchor" aria-label="anchor" href="#transformation-tip"></a>
</h4>
<p>There are times where the lesson authors forget to tag a block quote
with the correct type of tag to make it a callout block. In this case,
the block quote will remain unconverted in the lesson. For example let’s
say there was a block quote at the very top of the lesson that defined
prerequisites, but the author accidentally had a new line between the
blockquote and the IAL tag, meaning that the blockquote was not
processed:</p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># add a prerequisite block after the questions and objectives</span></span>
<span><span class="va">untranslated_block</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">&gt; ## Barnaby</span></span>
<span><span class="st">&gt;</span></span>
<span><span class="st">&gt; - a barn</span></span>
<span><span class="st">&gt; - a bee</span></span>
<span><span class="st">&gt;</span></span>
<span><span class="st"></span></span>
<span><span class="st">{: .prereq}</span></span>
<span><span class="st">"</span></span>
<span><span class="va">ep</span><span class="op">$</span><span class="fu">add_md</span><span class="op">(</span><span class="va">untranslated_block</span>, where <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">ep</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span><span class="fl">31</span><span class="op">)</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## title: Looping Over Data Sets</span></span>
<span><span class="co">## teaching: 5</span></span>
<span><span class="co">## exercises: 10</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::: objectives</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - Be able to read and write globbing expressions that match sets of files.</span></span>
<span><span class="co">## - Use glob to create lists of files.</span></span>
<span><span class="co">## - Write for loops to perform operations on files given their names in a list.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::::::::::::::::::: questions</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - How can I process many data sets with a single command?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## &gt; ## Barnaby</span></span>
<span><span class="co">## &gt; </span></span>
<span><span class="co">## &gt; - a barn</span></span>
<span><span class="co">## &gt; - a bee</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## {: .prereq}</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Use a `for` loop to process files given a list of their names.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - A filename is a character string.</span></span>
<span><span class="co">## - And lists can contain character strings.</span></span></code></pre></div>
<p>Notice that the block quote is picked up only as a blockquote, but
not a <em>special</em> block quote.</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="fu">get_blocks</span><span class="op">(</span><span class="st">".prereq"</span><span class="op">)</span></span>
<span><span class="co">## {xml_nodeset (0)}</span></span></code></pre></div>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="fu">get_blocks</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## {xml_nodeset (1)}</span></span>
<span><span class="co">## [1] &lt;block_quote&gt;\n  &lt;heading level="2"&gt;\n    &lt;text xml:space="preserve"&gt;Barn ...</span></span></code></pre></div>
<p>If we set the <code>ktag</code> attribute of this block quote to “{:
.prereq}”, then it will be recognised as a special blockquote, which can
be translated.</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># remove the orphan prereq tag:</span></span>
<span><span class="va">orphan_tag</span> <span class="op">&lt;-</span> <span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/xml_find_all.html" class="external-link">xml_find_all</a></span><span class="op">(</span><span class="va">ep</span><span class="op">$</span><span class="va">body</span>, </span>
<span>  <span class="st">".//md:paragraph[md:text[contains(text(),'.prereq}')]]"</span>, ns <span class="op">=</span> <span class="va">ep</span><span class="op">$</span><span class="va">ns</span><span class="op">)</span></span>
<span><span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/xml_replace.html" class="external-link">xml_remove</a></span><span class="op">(</span><span class="va">orphan_tag</span><span class="op">)</span></span>
<span><span class="va">ep</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span><span class="fl">31</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ---</span></span>
<span><span class="co">## title: Looping Over Data Sets</span></span>
<span><span class="co">## teaching: 5</span></span>
<span><span class="co">## exercises: 10</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::: objectives</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - Be able to read and write globbing expressions that match sets of files.</span></span>
<span><span class="co">## - Use glob to create lists of files.</span></span>
<span><span class="co">## - Write for loops to perform operations on files given their names in a list.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::::::::::::::::::: questions</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - How can I process many data sets with a single command?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## &gt; ## Barnaby</span></span>
<span><span class="co">## &gt; </span></span>
<span><span class="co">## &gt; - a barn</span></span>
<span><span class="co">## &gt; - a bee</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Use a `for` loop to process files given a list of their names.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - A filename is a character string.</span></span>
<span><span class="co">## - And lists can contain character strings.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ```python</span></span></code></pre>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># set the attribute of the block quote:</span></span>
<span><span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/xml_attr.html" class="external-link">xml_set_attr</a></span><span class="op">(</span><span class="va">ep</span><span class="op">$</span><span class="fu">get_blocks</span><span class="op">(</span><span class="op">)</span>, <span class="st">"ktag"</span>, <span class="st">"{: .prereq}"</span><span class="op">)</span></span>
<span><span class="va">ep</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span><span class="fl">31</span><span class="op">)</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## title: Looping Over Data Sets</span></span>
<span><span class="co">## teaching: 5</span></span>
<span><span class="co">## exercises: 10</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::: objectives</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - Be able to read and write globbing expressions that match sets of files.</span></span>
<span><span class="co">## - Use glob to create lists of files.</span></span>
<span><span class="co">## - Write for loops to perform operations on files given their names in a list.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::::::::::::::::::: questions</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - How can I process many data sets with a single command?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## &gt; ## Barnaby</span></span>
<span><span class="co">## &gt; </span></span>
<span><span class="co">## &gt; - a barn</span></span>
<span><span class="co">## &gt; - a bee</span></span>
<span><span class="co">## {: .prereq}</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Use a `for` loop to process files given a list of their names.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - A filename is a character string.</span></span>
<span><span class="co">## - And lists can contain character strings.</span></span></code></pre></div>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="fu">get_blocks</span><span class="op">(</span><span class="st">".prereq"</span><span class="op">)</span></span>
<span><span class="co">## {xml_nodeset (1)}</span></span>
<span><span class="co">## [1] &lt;block_quote ktag="{: .prereq}"&gt;\n  &lt;heading level="2"&gt;\n    &lt;text xml:sp ...</span></span></code></pre></div>
<p>Now we can convert the block to a fenced div with
<code>$unblock()</code></p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep</span><span class="op">$</span><span class="fu">unblock</span><span class="op">(</span>force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span><span class="fl">31</span><span class="op">)</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## title: Looping Over Data Sets</span></span>
<span><span class="co">## teaching: 5</span></span>
<span><span class="co">## exercises: 10</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::: objectives</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - Be able to read and write globbing expressions that match sets of files.</span></span>
<span><span class="co">## - Use glob to create lists of files.</span></span>
<span><span class="co">## - Write for loops to perform operations on files given their names in a list.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## :::::::::::::::::::::::::::::::::::::::: questions</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - How can I process many data sets with a single command?</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::  prereq</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Barnaby</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## - a barn</span></span>
<span><span class="co">## - a bee</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ::::::::::::::::::::::::::::::::::::::::::::::::::</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ## Use a `for` loop to process files given a list of their names.</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Davey, Erin Becker, Zhian N. Kamvar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
