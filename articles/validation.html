<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Validation of Lesson Elements • pegboard</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Validation of Lesson Elements">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pegboard</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.7.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/intro-xml.html">Working with XML data</a></li>
    <li><a class="dropdown-item" href="../articles/intro-episode.html">Introduction to the Episode Object</a></li>
    <li><a class="dropdown-item" href="../articles/intro-lesson.html">Introduction to the Lesson Object</a></li>
    <li><a class="dropdown-item" href="../articles/validation.html">Validation of Lesson Elements</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/carpentries/pegboard/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Validation of Lesson Elements</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/carpentries/pegboard/blob/main/vignettes/articles/validation.Rmd" class="external-link"><code>vignettes/articles/validation.Rmd</code></a></small>
      <div class="d-none name"><code>validation.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This package is designed to parse the structure of the Markdown and R
Markdown files inside a Carpentries-style lesson. To ensure consistent
lesson structure, it has built-in validators that will inspect headings,
links, and callout sections. This document will help you become familiar
with the output of the validators and how they can be used to update a
lesson.</p>
<p>Lesson authors and contributors will likely only see the output of
these validators and not need to interact with them directly. For
example, we have a lesson that contains some mal-formed links and
headings:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://carpentries.github.io/pegboard">pegboard</a></span><span class="op">)</span></span>
<span><span class="va">lsn</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Lesson.html">Lesson</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="fu"><a href="../reference/lesson_fragment.html">lesson_fragment</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#| Warning: The yaml field of yarn objects was deprecated in tinkr 0.2.1.</span></span>
<span><span class="co">#| <span style="color: #00BBBB;">ℹ</span> Please use frontmatter instead.</span></span>
<span><span class="co">#| <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span></span>
<span><span class="co">#| <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.</span></span></span>
<span><span class="co"># validation</span></span>
<span><span class="va">lsn</span><span class="op">$</span><span class="fu">validate_divs</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lsn</span><span class="op">$</span><span class="fu">validate_links</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#| <span style="color: #BBBB00;">!</span> There were errors in 4/14 images</span></span>
<span><span class="co">#| ◌ Some linked internal files do not exist &lt;https://carpentries.github.io/sandpaper/articles/include-child-documents.html#workspace-consideration&gt;</span></span>
<span><span class="co">#| ◌ Images need alt-text &lt;https://webaim.org/techniques/hypertext/link_text#alt_link&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ::warning file=_episodes/14-looping-data-sets.md,line=191:: [missing file]: [](../no-workie.svg)</span></span>
<span><span class="co">#| ::warning file=_episodes/14-looping-data-sets.md,line=195:: [image missing alt-text]: https://carpentries.org/assets/img/TheCarpentries.svg</span></span>
<span><span class="co">#| ::warning file=_episodes/14-looping-data-sets.md,line=197:: [missing file]: [Non-working image](../no-workie.svg) [image missing alt-text]: ../no-workie.svg</span></span>
<span><span class="co">#| ::warning file=_episodes/14-looping-data-sets.md,line=199:: [image missing alt-text]: { page.root }/no-workie.svg</span></span>
<span><span class="va">lsn</span><span class="op">$</span><span class="fu">validate_headings</span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#| <span style="color: #BBBB00;">!</span> There were errors in 13/37 headings</span></span>
<span><span class="co">#| ◌ Headings must be unique</span></span>
<span><span class="co">#| <span style="color: #0000BB; font-style: italic;">&lt;https://webaim.org/techniques/semanticstructure/#headings&gt;</span></span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=183:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=200:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=227:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=252:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=270:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=289:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=305:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=336:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=371:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=400:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/14-looping-data-sets.md,line=119:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/14-looping-data-sets.md,line=143:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/14-looping-data-sets.md,line=162:: (duplicated)</span></span></code></pre></div>
<p>We can see that there is informative and actionable output produced
that will allow lesson authors to make targeted changes in their files.
The next sections will detail how we can work with the output of these
methods.</p>
</div>
<div class="section level2">
<h2 id="link-validation">Link Validation<a class="anchor" aria-label="anchor" href="#link-validation"></a>
</h2>
<p>Each of the validation methods will produce messages (aka stderr) for
the user, but they also produce a data frame as output that contains
detailed information about each link and what tests it passed or did not
pass. You can find out what tests are run on links by accessing the help
page for <code>validate_links</code> by typing
<code><a href="../reference/validate_links.html">?validate_links</a></code> in your R console.</p>
<p>If we want to inspect this data frame, we can assign it to a new
variable:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">links</span> <span class="op">&lt;-</span> <span class="va">lsn</span><span class="op">$</span><span class="fu">validate_links</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#| <span style="color: #BBBB00;">!</span> There were errors in 4/14 images</span></span>
<span><span class="co">#| ◌ Some linked internal files do not exist &lt;https://carpentries.github.io/sandpaper/articles/include-child-documents.html#workspace-consideration&gt;</span></span>
<span><span class="co">#| ◌ Images need alt-text &lt;https://webaim.org/techniques/hypertext/link_text#alt_link&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ::warning file=_episodes/14-looping-data-sets.md,line=191:: [missing file]: [](../no-workie.svg)</span></span>
<span><span class="co">#| ::warning file=_episodes/14-looping-data-sets.md,line=195:: [image missing alt-text]: https://carpentries.org/assets/img/TheCarpentries.svg</span></span>
<span><span class="co">#| ::warning file=_episodes/14-looping-data-sets.md,line=197:: [missing file]: [Non-working image](../no-workie.svg) [image missing alt-text]: ../no-workie.svg</span></span>
<span><span class="co">#| ::warning file=_episodes/14-looping-data-sets.md,line=199:: [image missing alt-text]: { page.root }/no-workie.svg</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">links</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#| 'data.frame':    14 obs. of  28 variables:</span></span>
<span><span class="co">#|  $ episodes            : chr  "12-for-loops.md" "14-looping-data-sets.md" "14-looping-data-sets.m"..</span></span>
<span><span class="co">#|  $ scheme              : chr  "https" "https" "https" "https" ...</span></span>
<span><span class="co">#|  $ server              : chr  "docs.python.org" "docs.python.org" "docs.python.org" "docs.python."..</span></span>
<span><span class="co">#|  $ port                : int  NA NA NA NA NA NA NA NA 21846 -1451609192 ...</span></span>
<span><span class="co">#|  $ user                : chr  "" "" "" "" ...</span></span>
<span><span class="co">#|  $ path                : chr  "/3/library/stdtypes.html" "/3/library/glob.html" "/3/library/glob."..</span></span>
<span><span class="co">#|  $ query               : chr  "" "" "" "" ...</span></span>
<span><span class="co">#|  $ fragment            : chr  "range" "glob.glob" "" "" ...</span></span>
<span><span class="co">#|  $ orig                : chr  "https://docs.python.org/3/library/stdtypes.html#range" "https://do"..</span></span>
<span><span class="co">#|  $ text                : chr  "range" "glob.glob" "glob" "glob" ...</span></span>
<span><span class="co">#|  $ alt                 : chr  NA NA NA NA ...</span></span>
<span><span class="co">#|  $ title               : chr  "" "" "" "" ...</span></span>
<span><span class="co">#|  $ type                : chr  "link" "link" "link" "link" ...</span></span>
<span><span class="co">#|  $ rel                 : chr  NA NA NA NA ...</span></span>
<span><span class="co">#|  $ anchor              : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...</span></span>
<span><span class="co">#|  $ sourcepos           : int  135 51 57 58 140 163 189 191 193 193 ...</span></span>
<span><span class="co">#|  $ filepath            : 'fs_path' chr  "_episodes/12-for-loops.md" "_episodes/14-looping-data-se"..</span></span>
<span><span class="co">#|  $ parents             :List of 14</span></span>
<span><span class="co">#|  $ node                :List of 14</span></span>
<span><span class="co">#|   ..- attr(*, "class")= chr "AsIs"</span></span>
<span><span class="co">#|  $ known_protocol      : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#|  $ enforce_https       : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#|  $ internal_anchor     : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#|  $ internal_file       : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#|  $ internal_well_formed: logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#|  $ all_reachable       : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#|  $ img_alt_text        : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#|  $ descriptive         : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#|  $ link_length         : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span></code></pre></div>
<p>This data frame is combined output of three sources:</p>
<ol style="list-style-type: decimal">
<li>the output of [xml2::url_parse()]</li>
<li>the source data containing the original source file (filepath), line
number (pos), and XML node (node)</li>
<li>the tests performed as logical vectors, which can be extracted
programmatically</li>
</ol>
<p>Here, we can see the nodes that did not pass our tests by using the
<code>link_tests</code> vector, which is an internal vector defining the
inline messages printed for each failed test, to filter the output:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the subset of rows that did not pass all the tests</span></span>
<span><span class="va">invalid</span> <span class="op">&lt;-</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">links</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">link_tests</span><span class="op">)</span><span class="op">]</span>, MARGIN <span class="op">=</span> <span class="fl">1L</span>, <span class="va">all</span><span class="op">)</span></span>
<span><span class="co"># return the nodes</span></span>
<span><span class="va">links</span><span class="op">$</span><span class="va">node</span><span class="op">[</span><span class="va">invalid</span><span class="op">]</span></span>
<span><span class="co">#| [[1]]</span></span>
<span><span class="co">#| {html_node}</span></span>
<span><span class="co">#| &lt;img src="../no-workie.svg" alt="books as clubs" destination="../no-workie.svg" sourcepos="176:1-176:49"&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [[2]]</span></span>
<span><span class="co">#| {xml_node}</span></span>
<span><span class="co">#| &lt;image sourcepos="180:1-180:74" destination="https://carpentries.org/assets/img/TheCarpentries.svg" title=""&gt;</span></span>
<span><span class="co">#| [1] &lt;text sourcepos="180:3-180:18" xml:space="preserve"&gt;Carpentries logo&lt;/text&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [[3]]</span></span>
<span><span class="co">#| {xml_node}</span></span>
<span><span class="co">#| &lt;image sourcepos="182:1-182:38" destination="../no-workie.svg" title=""&gt;</span></span>
<span><span class="co">#| [1] &lt;text sourcepos="182:3-182:19" xml:space="preserve"&gt;Non-working image&lt;/text&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [[4]]</span></span>
<span><span class="co">#| {xml_node}</span></span>
<span><span class="co">#| &lt;image destination="{{ page.root }}/no-workie.svg" sourcepos="184:1-184:70"&gt;</span></span>
<span><span class="co">#| [1] &lt;text&gt;Non-working image with jekyll syntax&lt;/text&gt;</span></span></code></pre></div>
<p>For context, this is what the document looks like at those
positions:</p>
<pre><code><span><span class="co">#| &lt;img src="https://carpentries.org/assets/img/TheCarpentries.svg" alt="books as clubs"&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| &lt;img src="../no-workie.svg" alt="books as clubs"&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| Link to [Home]({{ page.root }}/index.html) and to [shell]({{ site.swc_pages }}/shell-novice)</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ![Carpentries logo](https://carpentries.org/assets/img/TheCarpentries.svg)</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ![Non-working image](../no-workie.svg)</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ![Non-working image with jekyll syntax]({{ page.root }}/no-workie.svg)</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| This text includes a [link that isn't parsed correctly by commonmark]({{ page.root }}{% link index.md %})</span></span>
<span><span class="co">#| . The rest of the text should be properly parsed.</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| {% include links.md %}</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="fenced-div-validation">Fenced Div Validation<a class="anchor" aria-label="anchor" href="#fenced-div-validation"></a>
</h2>
<p>Validation of fenced divs (aka callout blocks) <em>at the moment</em>
checks for whether or not the section divs we encouter in the lessons
are the ones we expect, <a href="https://github.com/carpentries/sandpaper/issues/254" class="external-link">to avoid
issues where a div class is mis-typed</a>.</p>
<p>The divs we expect are in the object
<code><a href="../reference/validate_divs.html">pegboard::KNOWN_DIVS</a></code>: callout, objectives, questions,
challenge, prereq, checklist, solution, hint, discussion, testimonial,
keypoints, instructor, spoiler, tab, group-tab, and caution.</p>
<p>Our example lesson is from the old styles repository, so it does not
have any fenced divs, but we can use a lesson fragment from
{sandpaper}:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">snd</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Lesson.html">Lesson</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="fu"><a href="../reference/lesson_fragment.html">lesson_fragment</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"sandpaper-fragment"</span><span class="op">)</span>, jekyll <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">snd_divs</span> <span class="op">&lt;-</span> <span class="va">snd</span><span class="op">$</span><span class="fu">validate_divs</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Notice that no message was produced indicating that the divs in our
lesson fragment were okay. When we look at the data frame that was
produced, we can see that there are six divs:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">snd_divs</span></span>
<span><span class="co">#|                   episodes               path        div         pb_label pos is_known</span></span>
<span><span class="co">#| div-1-questions  intro.Rmd episodes/intro.Rmd  questions  div-1-questions   7     TRUE</span></span>
<span><span class="co">#| div-2-objectives intro.Rmd episodes/intro.Rmd objectives div-2-objectives  13     TRUE</span></span>
<span><span class="co">#| div-3-challenge  intro.Rmd episodes/intro.Rmd  challenge  div-3-challenge  37     TRUE</span></span>
<span><span class="co">#| div-4-solution   intro.Rmd episodes/intro.Rmd   solution   div-4-solution  47     TRUE</span></span>
<span><span class="co">#| div-5-solution   intro.Rmd episodes/intro.Rmd   solution   div-5-solution  60     TRUE</span></span>
<span><span class="co">#| div-6-keypoints  intro.Rmd episodes/intro.Rmd  keypoints  div-6-keypoints  90     TRUE</span></span>
<span><span class="co">#| div-1-instructor  setup.md  learners/setup.md instructor div-1-instructor   6     TRUE</span></span>
<span><span class="co">#| div-2-solution    setup.md  learners/setup.md   solution   div-2-solution  14     TRUE</span></span>
<span><span class="co">#| div-3-solution    setup.md  learners/setup.md   solution   div-3-solution  22     TRUE</span></span></code></pre></div>
<p>If there are invalid div names in the lesson, they will be reported.
For example, the lesson we have right now, does not have any improper
fenced div classes, but if we were to add an invalid fenced div (via the
<code>add_md()</code> method in the <code><a href="https://docs.ropensci.org/tinkr/reference/yarn.html" class="external-link">tinkr::yarn()</a></code> class),
we would be able to find out very quickly:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">our_div</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"::: exercise"</span>, <span class="st">"\nthis is an invalid div\n"</span>, <span class="st">":::"</span><span class="op">)</span></span>
<span><span class="va">snd</span><span class="op">$</span><span class="va">episodes</span><span class="op">[[</span><span class="st">"intro.Rmd"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="fu">add_md</span><span class="op">(</span><span class="va">our_div</span><span class="op">)</span></span>
<span><span class="va">snd_divs</span> <span class="op">&lt;-</span> <span class="va">snd</span><span class="op">$</span><span class="fu">validate_divs</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#| <span style="color: #BBBB00;">!</span> There were errors in 1/10 fenced divs</span></span>
<span><span class="co">#| ◌ The Carpentries Workbench knows the following div types callout, objectives, questions, challenge, prereq, checklist, solution, hint, discussion, testimonial, keypoints, instructor, spoiler, tab, group-tab, caution</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ::warning file=episodes/intro.Rmd,line=NA:: [unknown div] exercise</span></span></code></pre></div>
<p>You can see from the table that the <code>is_known</code> column now
has a <code>FALSE</code> value:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">snd_divs</span></span>
<span><span class="co">#|                   episodes               path        div         pb_label pos is_known</span></span>
<span><span class="co">#| div-1-exercise   intro.Rmd episodes/intro.Rmd   exercise   div-1-exercise  NA    FALSE</span></span>
<span><span class="co">#| div-2-questions  intro.Rmd episodes/intro.Rmd  questions  div-2-questions   7     TRUE</span></span>
<span><span class="co">#| div-3-objectives intro.Rmd episodes/intro.Rmd objectives div-3-objectives  13     TRUE</span></span>
<span><span class="co">#| div-4-challenge  intro.Rmd episodes/intro.Rmd  challenge  div-4-challenge  37     TRUE</span></span>
<span><span class="co">#| div-5-solution   intro.Rmd episodes/intro.Rmd   solution   div-5-solution  47     TRUE</span></span>
<span><span class="co">#| div-6-solution   intro.Rmd episodes/intro.Rmd   solution   div-6-solution  60     TRUE</span></span>
<span><span class="co">#| div-7-keypoints  intro.Rmd episodes/intro.Rmd  keypoints  div-7-keypoints  90     TRUE</span></span>
<span><span class="co">#| div-1-instructor  setup.md  learners/setup.md instructor div-1-instructor   6     TRUE</span></span>
<span><span class="co">#| div-2-solution    setup.md  learners/setup.md   solution   div-2-solution  14     TRUE</span></span>
<span><span class="co">#| div-3-solution    setup.md  learners/setup.md   solution   div-3-solution  22     TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="heading-validation">Heading Validation<a class="anchor" aria-label="anchor" href="#heading-validation"></a>
</h2>
<p><strong>NOTE: We are rethinking the exact specifications for heading
validation at this time</strong></p>
<p>Validation of headings operate similarly to links as it produces a
data frame along with the message output that can be further inspected
and manipulated. You can find out more by accessing the help
documentation for <code>validate_headings</code> by typing
<code><a href="../reference/validate_headings.html">?validate_headings</a></code> in your R console.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">headings</span> <span class="op">&lt;-</span> <span class="va">lsn</span><span class="op">$</span><span class="fu">validate_headings</span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#| ── Heading structure ───────────────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#| # Episode: "For Loops" </span></span>
<span><span class="co">#| ├─## A for loop executes commands once for each value in a collection. </span></span>
<span><span class="co">#| ├─## A for loop is made up of a collection, a loop variable, and a body. </span></span>
<span><span class="co">#| ├─## The first line of the for loop must end with a colon, and the body must be indented. </span></span>
<span><span class="co">#| ├─## Loop variables can be called anything. </span></span>
<span><span class="co">#| ├─## The body of a loop can contain many statements. </span></span>
<span><span class="co">#| ├─## Use range to iterate over a sequence of numbers. </span></span>
<span><span class="co">#| ├─## The Accumulator pattern turns many values into one. </span></span>
<span><span class="co">#| ├─## Classifying Errors </span></span>
<span><span class="co">#| ├─## Solution  (duplicated)</span></span>
<span><span class="co">#| ├─## Tracing Execution </span></span>
<span><span class="co">#| ├─## Solution  (duplicated)</span></span>
<span><span class="co">#| ├─## Reversing a String </span></span>
<span><span class="co">#| ├─## Solution  (duplicated)</span></span>
<span><span class="co">#| ├─## Practice Accumulating </span></span>
<span><span class="co">#| ├─## Solution  (duplicated)</span></span>
<span><span class="co">#| ├─## Solution  (duplicated)</span></span>
<span><span class="co">#| ├─## Solution  (duplicated)</span></span>
<span><span class="co">#| ├─## Solution  (duplicated)</span></span>
<span><span class="co">#| ├─## Cumulative Sum </span></span>
<span><span class="co">#| ├─## Solution  (duplicated)</span></span>
<span><span class="co">#| ├─## Identifying Variable Name Errors </span></span>
<span><span class="co">#| ├─## Solution  (duplicated)</span></span>
<span><span class="co">#| ├─## Identifying Item Errors </span></span>
<span><span class="co">#| └─## Solution  (duplicated)</span></span>
<span><span class="co">#| ────────────────────────────────────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#| ── Heading structure ───────────────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#| # Episode: "Looping Over Data Sets" </span></span>
<span><span class="co">#| ├─## Use a for loop to process files given a list of their names. </span></span>
<span><span class="co">#| ├─## Use glob.glob to find sets of files whose names match a pattern. </span></span>
<span><span class="co">#| ├─## Use glob and for to process batches of files. </span></span>
<span><span class="co">#| ├─## Determining Matches </span></span>
<span><span class="co">#| ├─## Solution  (duplicated)</span></span>
<span><span class="co">#| ├─## Minimum File Size </span></span>
<span><span class="co">#| ├─## Solution  (duplicated)</span></span>
<span><span class="co">#| ├─## Comparing Data </span></span>
<span><span class="co">#| └─## Solution  (duplicated)</span></span>
<span><span class="co">#|   └─### ZNK test links and images</span></span>
<span><span class="co">#| ────────────────────────────────────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#| <span style="color: #BBBB00;">!</span> There were errors in 13/37 headings</span></span>
<span><span class="co">#| ◌ Headings must be unique</span></span>
<span><span class="co">#| <span style="color: #0000BB; font-style: italic;">&lt;https://webaim.org/techniques/semanticstructure/#headings&gt;</span></span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=183:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=200:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=227:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=252:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=270:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=289:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=305:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=336:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=371:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/12-for-loops.md,line=400:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/14-looping-data-sets.md,line=119:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/14-looping-data-sets.md,line=143:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=_episodes/14-looping-data-sets.md,line=162:: (duplicated)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">headings</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#| 'data.frame':    37 obs. of  11 variables:</span></span>
<span><span class="co">#|  $ episodes                     : chr  "12-for-loops.md" "12-for-loops.md" "12-for-loops.md" "12-"..</span></span>
<span><span class="co">#|  $ heading                      : chr  "A for loop executes commands once for each value in a col"..</span></span>
<span><span class="co">#|  $ level                        : int  2 2 2 2 2 2 2 2 2 2 ...</span></span>
<span><span class="co">#|  $ pos                          : int  21 54 67 101 113 133 155 180 183 189 ...</span></span>
<span><span class="co">#|  $ node                         :List of 37</span></span>
<span><span class="co">#|   ..- attr(*, "class")= chr "AsIs"</span></span>
<span><span class="co">#|  $ first_heading_is_second_level: logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#|  $ greater_than_first_level     : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#|  $ are_sequential               : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#|  $ have_names                   : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#|  $ are_unique                   : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#|  $ path                         : chr  "_episodes/12-for-loops.md" "_episodes/12-for-loops.md" "_"..</span></span></code></pre></div>
<p>This particular data frame has fewer rows because there are fewer
moving parts to headings than links, but they are indeed important. The
process for getting the subset of invalid headings is similar: use the
<code>heading_tests</code> vector from pegboard to subset the rows that
failed:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the subset of rows that did not pass all the tests</span></span>
<span><span class="va">invalid</span> <span class="op">&lt;-</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">headings</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">heading_tests</span><span class="op">)</span><span class="op">]</span>, MARGIN <span class="op">=</span> <span class="fl">1L</span>, <span class="va">all</span><span class="op">)</span></span>
<span><span class="co"># return the nodes</span></span>
<span><span class="va">headings</span><span class="op">$</span><span class="va">node</span><span class="op">[</span><span class="va">invalid</span><span class="op">]</span></span>
<span><span class="co">#| [[1]]</span></span>
<span><span class="co">#| {xml_node}</span></span>
<span><span class="co">#| &lt;heading sourcepos="163:5-163:15" level="2"&gt;</span></span>
<span><span class="co">#| [1] &lt;text sourcepos="163:8-163:15" xml:space="preserve"&gt;Solution&lt;/text&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [[2]]</span></span>
<span><span class="co">#| {xml_node}</span></span>
<span><span class="co">#| &lt;heading sourcepos="180:5-180:15" level="2"&gt;</span></span>
<span><span class="co">#| [1] &lt;text sourcepos="180:8-180:15" xml:space="preserve"&gt;Solution&lt;/text&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [[3]]</span></span>
<span><span class="co">#| {xml_node}</span></span>
<span><span class="co">#| &lt;heading sourcepos="207:5-207:15" level="2"&gt;</span></span>
<span><span class="co">#| [1] &lt;text sourcepos="207:8-207:15" xml:space="preserve"&gt;Solution&lt;/text&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [[4]]</span></span>
<span><span class="co">#| {xml_node}</span></span>
<span><span class="co">#| &lt;heading sourcepos="232:5-232:15" level="2"&gt;</span></span>
<span><span class="co">#| [1] &lt;text sourcepos="232:8-232:15" xml:space="preserve"&gt;Solution&lt;/text&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [[5]]</span></span>
<span><span class="co">#| {xml_node}</span></span>
<span><span class="co">#| &lt;heading sourcepos="250:5-250:15" level="2"&gt;</span></span>
<span><span class="co">#| [1] &lt;text sourcepos="250:8-250:15" xml:space="preserve"&gt;Solution&lt;/text&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [[6]]</span></span>
<span><span class="co">#| {xml_node}</span></span>
<span><span class="co">#| &lt;heading sourcepos="269:5-269:15" level="2"&gt;</span></span>
<span><span class="co">#| [1] &lt;text sourcepos="269:8-269:15" xml:space="preserve"&gt;Solution&lt;/text&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [[7]]</span></span>
<span><span class="co">#| {xml_node}</span></span>
<span><span class="co">#| &lt;heading sourcepos="285:5-285:15" level="2"&gt;</span></span>
<span><span class="co">#| [1] &lt;text sourcepos="285:8-285:15" xml:space="preserve"&gt;Solution&lt;/text&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [[8]]</span></span>
<span><span class="co">#| {xml_node}</span></span>
<span><span class="co">#| &lt;heading sourcepos="316:5-316:15" level="2"&gt;</span></span>
<span><span class="co">#| [1] &lt;text sourcepos="316:8-316:15" xml:space="preserve"&gt;Solution&lt;/text&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [[9]]</span></span>
<span><span class="co">#| {xml_node}</span></span>
<span><span class="co">#| &lt;heading sourcepos="351:5-351:15" level="2"&gt;</span></span>
<span><span class="co">#| [1] &lt;text sourcepos="351:8-351:15" xml:space="preserve"&gt;Solution&lt;/text&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [[10]]</span></span>
<span><span class="co">#| {xml_node}</span></span>
<span><span class="co">#| &lt;heading sourcepos="380:5-380:15" level="2"&gt;</span></span>
<span><span class="co">#| [1] &lt;text sourcepos="380:8-380:15" xml:space="preserve"&gt;Solution&lt;/text&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [[11]]</span></span>
<span><span class="co">#| {xml_node}</span></span>
<span><span class="co">#| &lt;heading sourcepos="104:5-104:15" level="2"&gt;</span></span>
<span><span class="co">#| [1] &lt;text sourcepos="104:8-104:15" xml:space="preserve"&gt;Solution&lt;/text&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [[12]]</span></span>
<span><span class="co">#| {xml_node}</span></span>
<span><span class="co">#| &lt;heading sourcepos="128:5-128:15" level="2"&gt;</span></span>
<span><span class="co">#| [1] &lt;text sourcepos="128:8-128:15" xml:space="preserve"&gt;Solution&lt;/text&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [[13]]</span></span>
<span><span class="co">#| {xml_node}</span></span>
<span><span class="co">#| &lt;heading sourcepos="147:5-147:15" level="2"&gt;</span></span>
<span><span class="co">#| [1] &lt;text sourcepos="147:8-147:15" xml:space="preserve"&gt;Solution&lt;/text&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="internal-testing">Internal testing<a class="anchor" aria-label="anchor" href="#internal-testing"></a>
</h2>
<p>For testing, we have created some documents that have extreme cases
of links and headings that failed to show all the features of our
examples:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex</span>  <span class="op">&lt;-</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"tests/testthat/examples"</span><span class="op">)</span></span>
<span><span class="va">lnk</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Episode.html">Episode</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">ex</span>, <span class="st">"link-test.md"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">hd</span>  <span class="op">&lt;-</span> <span class="va"><a href="../reference/Episode.html">Episode</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">ex</span>, <span class="st">"validation-headings.md"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="links">Links<a class="anchor" aria-label="anchor" href="#links"></a>
</h3>
<p>The links example has <em>several</em> mistakes covering our
possibilities:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lnk</span><span class="op">$</span><span class="fu">show</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#| ---</span></span>
<span><span class="co">#| title: Link Tests</span></span>
<span><span class="co">#| ---</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ## Internal links {#internal}</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ### :crystal\_ball: Heading with Emoji</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ### Heading with long name that has a label {#label-1}</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ### Another heading with a long name that has a label {#label-2}</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ### Heading with a class, but no label {.challenge}</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ### Heading with class and a label {.solution #label-3}</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| This is a [link to the Heading with Emoji](#heading-with-emoji) and a [link to</span></span>
<span><span class="co">#| label 1][rel-label-1] and a [link](#label-2) and [this link](#label-2).</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| This link goes to [the heading with class and a label](#label-3).</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| This link is [absolutely incorrect](#bad-fragment)</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| This [relative link goes to label 1][rel-label-1]</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ## Cross-Lesson links {#cross-lesson}</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| This [link will go to the image test][rel-image], but [this link is</span></span>
<span><span class="co">#| wrong](incorrect-link.html).</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [This link also goes to image test](image-test) and [*this* link goes to</span></span>
<span><span class="co">#| image test as well](./image-test.html)</span></span>
<span><span class="co">#| [This link also goes to image test, but with a slash](image-test/), though this</span></span>
<span><span class="co">#| may not work for us because it implies that there is an `index.html` hiding in</span></span>
<span><span class="co">#| there.</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| This link [should be a relative link](rel-image).</span></span>
<span><span class="co">#| This link [is a relative link that works][rel-image]</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| This link [goes to an internal nested file](files/thing.txt), but this internal</span></span>
<span><span class="co">#| link [does not exist](files/ohno.txt)</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ## Invalid protocols</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| This is a [link with a typo](gttps://example.com)</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| This is a [bitcoin link](bitcoin:FAKE-EXAMPLE)</span></span>
<span><span class="co">#| and this is a [javascript example](javascript:alert%28%27JavaScript%20Link!%27%29),</span></span>
<span><span class="co">#| both of which should never appear in lessons.</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ## HTTP links</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| This [link uses http, which is no bueno](http://example.com)</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ## Link text</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| If we have [link text that is informative](https://example.com/link-text#good),</span></span>
<span><span class="co">#| it will pass.</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| If we have links like</span></span>
<span><span class="co">#| [this][bad-link-text]</span></span>
<span><span class="co">#| [link][bad-link-text]</span></span>
<span><span class="co">#| [this link][bad-link-text]</span></span>
<span><span class="co">#| [a link][bad-link-text]</span></span>
<span><span class="co">#| [link to][bad-link-text]</span></span>
<span><span class="co">#| [here][bad-link-text]</span></span>
<span><span class="co">#| [here for][bad-link-text]</span></span>
<span><span class="co">#| [click here for][bad-link-text]</span></span>
<span><span class="co">#| [over here for][bad-link-text]</span></span>
<span><span class="co">#| [more][bad-link-text]</span></span>
<span><span class="co">#| [more about][bad-link-text]</span></span>
<span><span class="co">#| [for more about][bad-link-text]</span></span>
<span><span class="co">#| [for more info about][bad-link-text]</span></span>
<span><span class="co">#| [for more information about][bad-link-text]</span></span>
<span><span class="co">#| [read more about][bad-link-text]</span></span>
<span><span class="co">#| [read more][bad-link-text]</span></span>
<span><span class="co">#| [read on][bad-link-text]</span></span>
<span><span class="co">#| [read on about][bad-link-text],</span></span>
<span><span class="co">#| [a][bad-link-text],</span></span>
<span><span class="co">#| [][bad-link-text]</span></span>
<span><span class="co">#| they will fail, but [link text that is descriptive][1], albiet with a numeric</span></span>
<span><span class="co">#| anchor will work.</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ## Spans</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| This is an [internal span]{#spanny style='color: red'} that we might want to</span></span>
<span><span class="co">#| link to.</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [definition list]{#deffy .anchored}</span></span>
<span><span class="co">#| : This is a definition list item that has an anchor</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| We have examples of [spans](#spanny) and [definition lists](#deffy).</span></span>
<span><span class="co">#| We also have an example of a [missing anchor pointing to float](#floaty)</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| [rel-label-1]: #label-1</span></span>
<span><span class="co">#| [rel-image]: image-test.html</span></span>
<span><span class="co">#| [bad-link-text]: https://example.com/link-text#bad</span></span>
<span><span class="co">#| [1]: https://example.com/link-text#descriptive</span></span>
<span><span class="va">lnk</span><span class="op">$</span><span class="fu">validate_links</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#| <span style="color: #BBBB00;">!</span> There were errors in 31/45 links</span></span>
<span><span class="co">#| ◌ Links must have a known URL protocol (e.g. https, ftp, mailto). See &lt;https://developer.wordpress.org/reference/functions/wp_allowed_protocols/#return&gt; for a list of acceptable protocols.</span></span>
<span><span class="co">#| ◌ Links must use HTTPS &lt;https://https.cio.gov/everything/&gt;</span></span>
<span><span class="co">#| ◌ Some link anchors for relative links (e.g. [anchor]: link) are missing</span></span>
<span><span class="co">#| ◌ Some linked internal files do not exist &lt;https://carpentries.github.io/sandpaper/articles/include-child-documents.html#workspace-consideration&gt;</span></span>
<span><span class="co">#| ◌ Some links were incorrectly formatted</span></span>
<span><span class="co">#| ◌ Avoid uninformative link phrases &lt;https://webaim.org/techniques/hypertext/link_text#uninformative&gt;</span></span>
<span><span class="co">#| ◌ Avoid single-letter or missing link text &lt;https://webaim.org/techniques/hypertext/link_text#link_length&gt;</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ::warning file=link-test.md,line=18:: [uninformative link text]: [link](#label-2)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=18:: [uninformative link text]: [this link](#label-2)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=22:: [missing anchor]: [absolutely incorrect](#bad-fragment)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=29:: [missing file]: [this link is wrong](incorrect-link.html)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=37:: [incorrect formatting]: [should be a relative link][rel-image] -&gt; [should be a relative link](rel-image)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=41:: [missing file]: [does not exist](files/ohno.txt)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=45:: [invalid protocol]: gttps [needs HTTPS]: [link with a typo](gttps://example.com)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=47:: [invalid protocol]: bitcoin [needs HTTPS]: [bitcoin link](bitcoin:FAKE-EXAMPLE)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=48:: [invalid protocol]: javascript [needs HTTPS]: [javascript example](javascript:alert%28%27JavaScript%20Link!%27%29)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=53:: [needs HTTPS]: [link uses http, which is no bueno](http://example.com)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=61:: [uninformative link text]: [this](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=62:: [uninformative link text]: [link](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=63:: [uninformative link text]: [this link](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=64:: [uninformative link text]: [a link](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=65:: [uninformative link text]: [link to](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=66:: [uninformative link text]: [here](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=67:: [uninformative link text]: [here for](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=68:: [uninformative link text]: [click here for](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=69:: [uninformative link text]: [over here for](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=70:: [uninformative link text]: [more](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=71:: [uninformative link text]: [more about](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=72:: [uninformative link text]: [for more about](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=73:: [uninformative link text]: [for more info about](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=74:: [uninformative link text]: [for more information about](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=75:: [uninformative link text]: [read more about](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=76:: [uninformative link text]: [read more](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=77:: [uninformative link text]: [read on](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=78:: [uninformative link text]: [read on about](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=79:: [link text too short]: [a](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=80:: [link text too short]: [](https://example.com/link-text#bad)</span></span>
<span><span class="co">#| ::warning file=link-test.md,line=93:: [missing anchor]: [missing anchor pointing to float](#floaty)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="headings">Headings<a class="anchor" aria-label="anchor" href="#headings"></a>
</h3>
<p>The headings example also has several mistakes, and demonstrates the
value of having a visual heading tree displayed on output when
<code>verbose = TRUE</code></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hd</span><span class="op">$</span><span class="fu">show</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#| ---</span></span>
<span><span class="co">#| title: "Errors in Headings"</span></span>
<span><span class="co">#| ---</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| # First heading throws an error</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ### This heading throws another error</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ## This heading is okay</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ## This heading is okay</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| The above heading is not okay</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ### This heading is okay</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ## </span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| The abve heading doesn't make sense</span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ## This last heading is okay</span></span>
<span><span class="va">hd</span><span class="op">$</span><span class="fu">validate_headings</span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#| <span style="color: #BBBB00;">!</span> There were errors in 5/7 headings</span></span>
<span><span class="co">#| ◌ First heading must be level 2</span></span>
<span><span class="co">#| ◌ Level 1 headings are not allowed</span></span>
<span><span class="co">#| ◌ Headings must be sequential</span></span>
<span><span class="co">#| ◌ Headings must be named</span></span>
<span><span class="co">#| ◌ Headings must be unique</span></span>
<span><span class="co">#| <span style="color: #0000BB; font-style: italic;">&lt;https://webaim.org/techniques/semanticstructure/#headings&gt;</span></span></span>
<span><span class="co">#| </span></span>
<span><span class="co">#| ::warning file=validation-headings.md,line=5:: (must be level 2) (first level heading)</span></span>
<span><span class="co">#| ::warning file=validation-headings.md,line=7:: (non-sequential heading jump)</span></span>
<span><span class="co">#| ::warning file=validation-headings.md,line=9:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=validation-headings.md,line=11:: (duplicated)</span></span>
<span><span class="co">#| ::warning file=validation-headings.md,line=18:: (no name)</span></span>
<span><span class="co">#| ── Heading structure ───────────────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#| # Episode: "Errors in Headings" </span></span>
<span><span class="co">#| ├─# First heading throws an error  (must be level 2) (first level heading)</span></span>
<span><span class="co">#| │ ├─### This heading throws another error  (non-sequential heading jump)</span></span>
<span><span class="co">#| │ ├─## This heading is okay  (duplicated)</span></span>
<span><span class="co">#| │ ├─## This heading is okay  (duplicated)</span></span>
<span><span class="co">#| │ │ └─### This heading is okay </span></span>
<span><span class="co">#| │ ├─##   (no name)</span></span>
<span><span class="co">#| │ └─## This last heading is okay</span></span>
<span><span class="co">#| ────────────────────────────────────────────────────────────────────────────────────────────────────</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Davey, Erin Becker, Zhian N. Kamvar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
